












                 
<!DOCTYPE html>
<html class="ua-win ua-wk">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=7"/>
    <meta name="saoatech-site-verification" content="N2Y5MzU2M2YyNmVhOTllMGQwYmI4NzAwMTIxYmE2ZDU=" />
    <title>【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑_中兴校园招聘讨论区_大街网_预见新自己！</title>
    <link rel="shortcut icon" href="http://assets.dajieimg.com/images/favicon.ico" />
    <meta content="大街网中兴校园招聘讨论区内容——【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑，【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑简介：span style" name="description"/>
    <meta content="【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑, 中兴【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑, 中兴2013招聘讨论区, 中兴2013校园招聘讨论区, 中兴校园招聘讨论区" name="keywords"/>
    <script type="text/javascript">var _head_start = new Date();var _current_date='2013-01-25 10:45:46';</script>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/css/dajie.45491.css"/>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com??/css/layout/fullwidth.41884.css,/css/channels/club2012.45226.css"/>
    <script type="text/javascript" src="http://assets.dajieimg.com/js/dajie.45275.js"></script>
    <script type="text/javascript" src="http://assets.dajieimg.com??/lib/jquery/jquery.query.43272.js,/js/jquery.linkup.43535.js,/up/atFriend/js/jquery.atFriend.38911.js"></script>
    <script type="text/javascript">
        $.domains = {
            www : "www.dajie.com",
            assets : "assets.dajieimg.com"
        };
    </script>
</head>
<body >
<script type="text/javascript">var  _body_start = new Date();</script>
        <iframe src="http://www.dajie.com/crossdomain/proxy.html?t=1359081946842" id="www-ajax-frame" style="display:none;"></iframe>
    <script type="text/javascript">
        document.domain = 'dajie.com';
    </script>
<div id="dj-header-wrap" class="dj-top-micro">
    <div>
        <div id="header">
        <div id="logo">
            <h1>
                <a href="http://www.dajie.com/home">
                        <img src="http://assets.dajieimg.com/images/header/dj_logo_m_2013.png" alt="大街网"/>
                </a>
            </h1>
        </div>
        <div class="dj-top-section clearfix">
            <div class="dj-uinfo-action clearfix">
                <div class="dj-user-info" id="login-header-region" style="display: none;">
                    <div class="uinfo-inner">
                        <div class="user-avatar">
                            <a style="display: none;" href="http://www.dajie.com/profile/mine" title="" id="user-avatar-link-in-header">
                            </a>
                            <a class="aname" href="http://www.dajie.com/profile/mine" title=""><span class="uname"></span><b class="arrow-ud"></b></a>
                        </div>
                        <div class="user-stuff">
                            <ul class="nav-select">
                                <li><a href="http://job.dajie.com/resume/index" title="我的简历">我的简历</a></li>
                                <li><a href="http://www.dajie.com/settings/avatar" title="帐号设置">帐号设置</a></li>
                                <li class="has-separate last"><a class="dj-hd-special-out" href="http://www.dajie.com/account/logout" title="退出">退出</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="login-pls" id="unlogin-header-region" style="display: none;">
                    <a href="http://www.dajie.com/account/login" title="登录">登录</a><b class="dj-top-separate"></b><a href="http://www.dajie.com/account/reg" title="注册">注册</a>
                </div>
            </div>
            <div class="dj-nav-g">
    <ul class="dj-nav-list clearfix" id="dj-nav-list" style="display:none">
        <li>
            <a href="http://www.dajie.com/home" title="首页"><cite>首页</cite></a>
        </li>
        <li>
            <a href="http://www.dajie.com/profile/mine" title="编辑我的档案"><cite>我的档案</cite></a>
        </li>
        <li class="clearfix">
            <a href="http://job.dajie.com/" title="职位"><cite>职位</cite></a>
        </li>
        <li class="J_companyPop ">
            <a href="http://www.dajie.com/corp/search/index?f=nav" title="公司"><cite>公司</cite></a>
        </li>
    </ul>
            </div>
        </div>
    </div>
    </div>
    <div style="width:220px;display:none;position:absolute;" class="prompt-tips tips-top" id="J_companyPop">
        <div class="tips-main">
            <span class="pointer"></span>
            <a href="javascript:void(0)" stat="2002" class="remove floatright" style="margin-top:2px;">关闭</a>公司需要你补充资料，<a id="dj-corp-edit" target="_blank" href="#">立即补充</a>！
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            $('#J_companyPop .remove').live('click', function () {
                $.cookie('dj_corp_bubble', 'false', {path:'/', domain:'dajie.com', expires:1});//24小时之后过期
                $(this).parents('#J_companyPop').hide();
            });
            $('#dj-corp-edit').live('click', function () {
                var date = new Date();
                date.setTime(date.getTime() + (30 * 60 * 1000)); //30分钟
                $.cookie('dj_corp_bubble', 'false', {path:'/', domain:'dajie.com', expires:date});
                $(this).parents('#J_companyPop').hide();
            });
            $('#dj-nav-list .new').each(function(){
                var $this = $(this);
                if(!$.cookie('c-'+$this.attr('id'))) {
                    $this.show();
                }
            });
            $('#dj-nav-list > li > a').click(function(){
                var $point = $(this).next('.new');
                if($point.length){
                    var date = new Date();
                    date.setTime(date.getTime() + (60 * 60 * 1000) * 24 * 180); //30分钟
                    $.cookie('c-' + $point.attr('id'), '1', {path:'/', domain:'dajie.com', expires:date});
                }
            })
        });
        (function () {
            var iframe = '<iframe class="iframe-mask" frameborder="0" style="" src="javascript:void(0);"></iframe>',
                    hasOverLay = [];
            $('#dj-hd-circle,#postMore, #dj-app-nav, #login-header-region > .uinfo-inner, #dajie-notice-region').each(function (i) {
                $(this).bind('mouseover',function () {
                    var $this = $(this);
                    if($this.parents('#dj-nav-list').length && !$this.hasClass('has-more')) return false;
                    var $navSelect = $this.find('.nav-select'),
                            $width = $navSelect.outerWidth(),
                            $height = $navSelect.outerHeight();
                    $this.addClass('on');
                    if ($this.hasClass('uinfo-inner')) {
                        var _w = $this.outerWidth() - 2;
                        _w = (_w < 94) ? 94 : _w;
                        $navSelect.css({"width":_w});
                        $width = _w;
                        hasOverLay[4] = "1";
                    }
                    if (!$navSelect.parents('.on').find('iframe').length) {
                        $navSelect.parents('.on').append(iframe);
                    }
                    $('.on').find('iframe').css({"width":$width, "height":$height});
                    $this.find('.iframe-mask').show();
                }).bind('mouseleave', function () {
                    var $this = $(this);
                    if($this.parents('#dj-nav-list').length && !$this.hasClass('has-more')) return false;
                    $this.removeClass('on');
                    $this.find('.iframe-mask').hide();
                });
            });
            $('#dj-header-wrap .dj-nav-g, #dj-header-wrap .dj-uinfo-action').mouseout(function (e) {
                if (e.clientY < 0) {
                    setTimeout(function () {
                        $('.dj-nav-g li, #login-header-region .uinfo-inner, #dajie-notice-region').removeClass('on');
                        $('#dj-header-wrap .iframe-mask').hide();
                    }, 0);
                }
            });
        })();
        var is_login = $.cookie('dj_auth') != null || $.cookie('dj_auth_v3') != null; //必须是全局变量，别的项目有用
        window['is_login'] = is_login;
        (function () {//通知气泡以及用户相关信息
            if (is_login) {
                $('#unlogin-header-region').hide();
                $('#login-header-region').show();
                $('#dj-nav-list').show();
                try {
                    window.setTimeout(function () { //为了获取登录用户的头像
                        jQuery.getScript('http://www.dajie.com/ajax/loginuserinfo?t=' + new Date().getTime());
                    }, 50);
                } catch (e) {
                }
                if ($('#dajie-notice-region').length > 0) {
                    $('#dajie-notice-region').show();
                    try {
                        window.setTimeout(function () { //为了获取登录用户的头像
                            jQuery.getScript('http://www.dajie.com/notice/check?t=' + new Date().getTime());
                        }, 1000);
                        window.setInterval(function () {
                            jQuery.getScript('http://www.dajie.com/notice/check?t=' + new Date().getTime());
                        }, 5000 * 60);
                    } catch (e) {
                    }
                }
            } else {
                $('#login-header-region').hide();
                $('#dajie-notice-region').hide();
                $('#unlogin-header-region').show();
            }
        })();
    </script>
</div>
<div class="dj-content-wrap " id="dj-content-wrap">
    <div class="dj-content-inner">
            <div class="dj-content-shadow">
<div id="content">
<div id="maincolumn">
<link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/bd/club/zte/skin.40552.css" />
        <div id="tops-cont"  style="display:none;">
       <div class="tops-cont">
           <p class="b f14 g3 ">你关注的名企达到上限100家，不能再关注名企了</p>
           <p class="g3">取消已关注的名企，才能继续关注其他名企</p>
           <p class="green">看看<a href="http://company.dajie.com/myfollow">“我关注的名企”</a></p>
       </div>
    </div>

    <div class="banner-title">
            <div class="attentionBox">
                <a href="##" title="关注" class="attention-btn" id="follow-club" cid="649" name="中兴通讯股份有限公司" ></a>
                <a href="##" title="取消关注" class="attentioned" id="follow-cancel" cid="649" name="中兴通讯股份有限公司" style="display:none;" ></a>
                <a href="/club/friendlist"><span id="member-cnt" class="text-link">88625</span></a><br/>
                <span class="large">已关注</span>
            </div>
            <div class="c_logo"><a href="http://zte.dajie.com/page/welcome-zte"><img src="http://fs1.dajie.com/newcorplogo/sl/1308135_sl.png" alt="中兴通讯" /></a></div>
        <span class="company-title">中兴通讯股份有限公司</span>

    </div>    <div class="navigation">
        <ul >
            <li class="home" ><a href="http://zte.dajie.com/page/welcome-zte"><span>首&nbsp;页</span></a></li>
            <li class="current" ><a href="/discuss/topic/list"><span>讨论区</span></a></li>
                <li  ><a href="/schedule/list"><span>日&nbsp;程</span></a></li>
                <li  ><a href="/club/introduce"><span>企业介绍</span></a></li>
                <li  ><a href="/page/zte/album"><span>企业风采</span></a></li>
                <li   style="position:relative;z-index:99"><a href="/project/7372">中兴手机创意大赛</a></li>
                <li><a href="#" id="nav-more"><span>更多</span><em class="arrow"></em></a></li>
        </ul>
    </div>
    <div class="clubNotifications-sub">
        <ul>
                        <li><a href="/project/6872">中兴通讯2013届校园招聘启动仪式</a></li>
                        <li><a href="/project/6272">中兴捧月杯校园程序设计大赛兴趣赛</a></li>
                        <li><a href="/project/6123">中兴捧月杯校园程序设计大赛</a></li>
                        <li><a href="/project/6180">中兴通讯2013校园招聘</a></li>
        </ul>
    </div>


<div class="client">
    <div class="roof"></div>
    <div class="room clearfix">
        <div class="crumb clearfix">
            <span class="floatright"><a href="/discuss/topic/list" class="text-link">返回讨论区列表</a></span>
            <a href="/discuss/topic/list" class="text-link">讨论区</a>&nbsp;<span class="gc">&gt;</span>&nbsp;
        【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑
        </div>
        <div class="detailMain floatleft">
            <div class="topic">
                <div class="user-text">
                    <div class="pic">
                            <a href="http://www.dajie.com/profile/WHVf5hmW5g**" title="专家组"><img src="http://9.head00.dajieimg.com/2010/04/22/022/12719346225432589s.jpg" title="专家组"/></a>
                    </div>
                    <h1>【复赛7.27更新】任务四“负荷分担的可靠性系统仿真”答疑</h1>
                        <a href="http://www.dajie.com/profile/WHVf5hmW5g**">专家组</a>
                    <span class="g9">
                                &nbsp;&nbsp;
                    </span>

                    <span class="time g9">2012-07-16 10:14:16</span>

                    <div class="topic-msg large">
<span style="font-size:medium"><span style="color:#800000"><span style="font-size:medium"><span style="font-size:medium"><span style="font-size:medium">请同学们把复赛中与任务四相关的问题跟帖发在下方，方便我们的解答与互动，谢谢~</span></span></span></span><span style="font-size:3px"><span style="font-size:3px"><br /></span><span style="font-size:small"><br /> &nbsp; &nbsp; <span style="color:#ff0000"><b>【7.27汇总】</b></span><br />&nbsp;<span style="color:#800080">1、专家你好，请问我可不可以只提交debug版本的程序?谢谢!</span><br />&nbsp;可以。请注意同时一定要以工程文件形式提供可编译执行的源代码。<br />&nbsp;<span style="color:#800080">2、专家你好，我想请问当SCN出现问题断开连接后，随机由一个PLN将其荷载分配给其它PLN，不再行使PLN职能，而是暂代SCN职能，直到SCN重新上线，它将作为一个0荷载PLN重新加入系统</span><br />&nbsp;可以。<br />&nbsp;<span style="color:#800080">3、你好，需不需要考虑负载节点意外崩溃(非用户主动热插拔)的情况?这种意外崩溃造成的用户丢失是否违规?</span><br />&nbsp;请自行考虑。<br />&nbsp;<span style="color:#800080">4.在这个情况在，有可能增加一个用户后，怎么样都不能达到总体负载平衡。我的问题是：在上述这个情况下，为了达到负载平衡，是否需要全局动态分配。而且这种动态调整的操作只会发生在增加一个用户后。</span><br /><span style="color:#800080">&nbsp;还有，现实条件规定每个Payload&nbsp;Node的处理能力肯定是有限。而用户是无限的。本设计没有说增加Payload&nbsp;Node的操作，那么是不是对于草果负荷的用户。弄一个排队机制，等待其他用户释放后，再进去服务。</span><br />&nbsp;第一个问题：不需要。<br />&nbsp;第二个问题：请自行考虑。<br />&nbsp;<span style="color:#800080">5、专家您好，SysCtrlNode进程中说分配并通知PlNode节点为用户服务，意思是说分配这个过程是在SysCtrlNode进程中实现的?这样不是增加了SysCtrlNode进程和PlNode进程通信次数，这有必要吗?直接在PlNode进程中分配可以不?</span><br />&nbsp;不太理解你的意思，在存在多个PlNode的情况下由哪个PlNode负责分配用户呢?又如何保证均衡分配呢?<br />&nbsp;<span style="color:#800080">6、请问所有的用户都是在同一个进程中吗?</span><br />&nbsp;不理解问题的含义。测试进程建立或释放用户，SysCtrlNode进程分配用户，PlNode进程提供用户服务，这些进程都与用户有关。<br /><br />&nbsp;<b><span style="color:#ff0000">【7.26汇总】</span></b><br />&nbsp;<span style="color:#800080">1.专家您好：</span><br /><span style="color:#800080">&nbsp;测试用例需要提供UI输入供测试者手工输入，又说还有提交可执行的测试用例代码，难道要搞两个测试进程吗，一个手工输入验证，一个是一下执行到底的可执行代码。可这个又要有诸如关闭PlNode这样的操作，不知道要求提交的测试用例什么格式，专家能介绍一下吗</span><br />&nbsp;测试用例要能完整验证功能的正确性，开放的接口可以提供手工输入测试，不一定要搞两个测试进程，好的设计一个测试进程可以完成很多事情，具体的请自行设计<br />&nbsp;<span style="color:#800080">2.专家您好，复赛要求复赛的测试用例需要构造PlNode为0~5的不同情况。是不是要求提供6个测试用例.exe文件分别对应PlNode为0~5的情况?</span><br />&nbsp;测试用例的个数不一定是exe文件的个数，具体的自行设计，只要满足要求即可<br />&nbsp;<span style="color:#800080">3.请问专家：假如我也是运行两个SysCtrlNode，但不是主备关系，两个都和所有的PINode还有测试进程建立好了连接，并在交换着数据。那么这时的SysCtrlNode崩溃也是指关闭其中一个?</span><br />&nbsp;关闭一个是崩溃的一种情况.<br />&nbsp;<span style="color:#800080">4.专家你好，提交可执行文件的时候，能否只提交exe文件，而不必提交整个debug或者realease文件夹?</span><br />&nbsp;可以<br /><br />&nbsp;<b><span style="color:#ff0000">【7.25汇总】</span></b><br />&nbsp;<span style="color:#800080">1、请问专家：如果我们的作品，没有完全完成所有的功能，是不是会直接被淘汰?</span><br />&nbsp;会根据完成的各个功能进行打分，但最好能完成题目要求的所有功能<br />&nbsp;<span style="color:#800080">2、专家您好，我使用了Win32界面编程相关API，创建了窗口程序。但是使用任然是C语言(.c的源文件)，请问这是可以的吧?</span><br />&nbsp;可以<br />&nbsp;<span style="color:#800080">3、专家您好：问题一：当主总控节点挂掉的时候，我的(备份)副总控节点会接管工作，这个时候能满足题目的要求，但是如果这时又关闭了(备份)副总控节点，那就无法为用户提供服务了，必须要打开主总控节点，这样会违背题意么?</span><br />&nbsp;不违背<br />&nbsp;<span style="color:#800080">问题二：当主总控节点挂掉的时候，我的(备份)副总控节点会接管工作，但是这个时候主总控节点是无法打开的，一打开就会自己关闭了，也就是说我只有在备份关闭的时候才能打开主控，这样是否有错?谢谢专家。</span><br />&nbsp;也是一种实现方案，但是否是最优或较优的设计方案就需要您自己斟酌了<br />&nbsp;<span style="color:#800080">4、总控制节点进程和他的备用总控制节点之间的通信是否必须用socket?用其他的是否符合题目要求?</span><br />&nbsp;请参考7.23汇总的问题15第1问<br />&nbsp;<span style="color:#800080">5、回复专家组: 谢谢专家的回复，我的疑问是这样的。之前的问答有说过当所有负载节点都关闭的时候所有用户都被释放，我想做成就算所有负载节点都关闭了但并不丢失没有请求释放的用户，而是重启后可以继续为没有请求退出的用户继续服务。不知道这样设计是否可以。谢谢。</span><br />&nbsp;所有负载节点都关闭时，应该释放所有用户<br />&nbsp;<span style="color:#800080">6、您好，我想请问一下，在这种情况下：首先，当前系统总控节点正常运行，只有负荷节点1，然后，系统总控节点瘫痪了(还没有重启)，此时，负荷节点1被拔出，然后，负荷节点1又开启，最后，系统总控节点重启了。这种情况下，以前存在的用户是全部被释放掉，还是将以前的用户再全部分配给节点1?谢谢!</span><br />&nbsp;所有负载节点都关闭时，应该释放所有用户<br />&nbsp;<span style="color:#800080">7、你好!我想问一下，如果用户标识直接采用int型数据，如ConnectReq(1)代表用户1接入，而不使用ConnectReq(A)，以方便测试更多用户数的用例;这样是否可以?</span><br />&nbsp;可以<br /><br />&nbsp;<span style="color:#ff0000"><b>【7.24汇总】</b></span><br />&nbsp;<span style="color:#800080">1. 请问专家：test进程关闭后，上面连接的所有用户可否全部释放?若果处理成：test关闭，所有用户连接即断开，可以吗?请回复哦，谢谢啦!!</span><br />&nbsp;请自行斟酌怎样设计更合理。建议选择权交给操作者。<br />&nbsp;<span style="color:#800080">2. 专家您好，请问：为了方便测试，为测试进程增加几个API，这些API不会影响初赛的四个API功能以及复赛的Pnode的直接手动热插拔和直接重启功能，那么新增这些API是否对评分有影响，或者说是否不合题目要求?如果专家的回答是可以自行设计，可以认为是对评分不会有影响吧。</span><br />&nbsp;新增API没有不合题意，可以自行设计。所有提交的代码都是参评的对象。<br />&nbsp;<span style="color:#800080">3. 专家你好，请问下如果采用备份SysCtrlNode机制，是不是不考虑主SysCtrlNode和备份SysCtrlNode同时坏掉的情况，如果考虑的话，不是退化成了单个SysCtrlNode坏掉还要保持服务可用的问题?</span><br />&nbsp;请参考7.23汇总的问题2答复。<br />&nbsp;<span style="color:#800080">4. 请问专家：测试用例能否不使用assert函数。题目提供的测试用例中，assert函数是用来检测函数GetPnodeByUser和GetUserNumByPnode的返回值是否是期待值。那我可以用if语句来检测函数的返回值是否是期待值，如果是期待值就输出一句判断信息，如果不是就输出另一句判断信息。</span><br />&nbsp;测试是为了发现并解决问题，如何能更快、更便于发现问题，请自行考虑设计用例。<br />&nbsp;<span style="color:#800080">5. 专家您好：Test进程感知到一个SysCtrlNode异常后就启动另一个SysCtrlNode进程，用户数据采用文件形式备份和恢复，这样符合要求吗?SysCtrlNode故障后，并不能保证接收到所有的用户请求，所以得必须要用户的再次请求，这应该不算违规吧?</span><br />&nbsp;测试进程主要是为了测试，通过它解决系统故障请考虑是否合理。<br />&nbsp;<span style="color:#800080">6. 专家你好，关于关闭test进程以后，是否要求所有已连接的用户均断开?还是要求继续存在?</span><br />&nbsp;同问题1答复<br />&nbsp;<span style="color:#800080">7. 专家好!测试用例全部由评委手动输入，不再自动读取可以吧</span><br />&nbsp;请参见7.18 汇总的问题3答复<br />&nbsp;<span style="color:#800080">&nbsp;8. 1.再次确定下 主动杀死总控或者负载后的处理情况 都按题目要求实现后，但是我现在想方便测试，我增加了TEST发送信令来告知重启一个总控或者拔出一个PLnode的功能(可选功能)是否可行?2.另外之前我说的那个TEST检测到总控断掉后，我不是让TEST启动总控，而是当重新连接好后(很快)重传当时发送失败的建立请求(或者其他请求)，可以吗?3.我假设总控挂掉和负载挂掉不在一个时刻，就是说就算同时挂掉，也是有那么一点时间间隔(可能无限小)的可以吗?4.再次确定 当某一时刻所有PNode都被拔出时 是否是彻底释放用户?</span><br />&nbsp;1)很好。<br />&nbsp;2)细节请自行考虑。对用户造成的影响是越少越好。<br />&nbsp;3)细节请自行考虑。对用户造成的影响是越少越好。<br />&nbsp;4)是的。<br />&nbsp;<span style="color:#800080">9. 总控节点瘫痪时，与测试进程的连接就断开了，总控节点重启后，测试进程需要与总控节点重新连接，这算用户感知到SYS宕机吗?</span><br />&nbsp;请自行斟酌怎样设计更合理。可以参见之前的答复。<br />&nbsp;<span style="color:#800080">10. 专家您好：</span><br /><span style="color:#800080">&nbsp;看了那么多的问答，我突然想到一个问题要问您。按照题目的要求和问答回复的内容我能否做成：只要用户没有请求退出，那么用户迟早能够得到 ( 正在接入用户 ) 或继续得到 ( 已接入用户 ) 服务器服务?</span><br />&nbsp;正常情况下，用户是否退出就是由用户来决定的。不知道你的疑问在哪里。<br /><br />&nbsp;<span style="color:#ff0000"><b>【7.23汇总】</b></span></span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">1. 针对29号的专家答复：为什么总控重启期间用户还可以正常请求?还可以申请接入、释放?真心不懂了?就算总控有备份，备份也可以宕机呀。可以做成假接入、假释放吗?要是不行的话，总控没有了还可以正常服务，那还要总控干什么呢?求回复，谢谢专家!</span></span><br /><span style="font-size:small">&nbsp;7月29号还没有到，没找到你所说的答复。我理解你是在问SysCtrlNode发生故障时如何设计方案来保证系统可用，假接入和假释放肯定是不对的，其他的方案是否有效请自行考虑吧。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">&nbsp;2. 的确是要逆天了。通过专家的回复可以看出，SysCtrNode死机后，重启前(也就是系统中没有SysCtrNode的情况下)，所有的API操作都要顺利完成，不能伪装。上面同学说得好，即便有备份，当所有的备份都死机后，即系统中彻底没有总控后，API是不可能完成的，除非山无棱，天地合。按照专家说的情况，必须设计备份的SysCtrNode进程(假设系统中一共两个Sys)，在主Sys进程死机后，重启前，另一个绝对不能死，不然就不可能完成API任务，否则只能逆天了</span></span><br /><span style="font-size:small">&nbsp;在电信设备实际运维中，出现设备宕机也是很可能发生的，此时考虑的重点应是如何减少这种故障对业务用户的影响，绝对十全十美的方案也许是不存在的，但我们可以无限去接近它。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">3. 题目中——“即，假使SysCtrlNode重启，对于已接入的用户服务没有影响，通过测试用例进程仍能正常释放已接入的用户”——这句话的意思应该是SysCtrNode重启正常工作后...这样的设计才有意义。如果非要在SysCtrNode重启前(相当于直接停用了)进行API操作是非常不合理的。除非系统中有备份的SysCtrNode进程。那么原系统就必须设计为双(或者更多)SysCtrNode的系统。总控是服务器，sock端口是绑定的，所以他们必然不一样(监听端口不一样，所以应该不能由一个Sys程序启动多次得到，这一点与PlNode不同)那么，就变成了多Sys系统了，如果要TEST进程和PlNode能自动切换Sys(端口变了)，那么是非常繁琐的，意义不大。现实服务器系统中的备份，一般都是一样的。我相信所有人都在纠结这个问题，不知大家怎解?(完成专家说的Sys重启前TEST的API操作也正常)</span></span><br /><span style="font-size:small">&nbsp;我理解你是在SysCtrlNode主备方案的前提下讨论这个问题，此时可以认为备用接管主用之前这一短暂的时间间隔内，是无法做到对已接入用户没有影响的。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">4. 专家您好，请问可否针对本任务设计两个SysCtrlNode进程，并在初始化的时候启用这两个SysCtrlNode进程，使用其中一个进程进行数据交互，另一个进程作为备用进程，当一个进程瘫痪时，可以用原来的备用进程继续为Test进程和PlNode进程提供服务，这样是否算违规?</span></span><br /><span style="font-size:small">&nbsp;这应该算是主备方案，不算违规。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">5. 我觉得专家的的考虑大多是站在用户感受基础上的，而不是测试目的上。专家说的用户正常服务应该是对于已接入的用户能够在负荷节点正常执行某种服务，而不是进行查询等操作(这些操作应该属于附加服务)。我感觉把这套系统放在移动通信上理解更容易，通话请求成功后，基站可以实时更换，通话不能中断，对用户来说不用透明。另：感觉这个题目正在不断的被明确化、复杂化，最后大家提交的作评估计都一个样子了</span></span><br /><span style="font-size:small">&nbsp;同感，在无法做到完全没有影响的情况下，可以考虑如何尽量减少影响。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">6. 专家您好：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;1. 7.19的某个问题：当SCN发生瘫痪的情况下(例如重启还没有启动好)，系统是否可用，即是否能够正常释放已接入的用户和接入新用户?</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;2. 专家已经给的回答：要可用。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;3. 我们组的疑问：当SCN发生瘫痪的情况下，何来“要可用”正常服务?</span></span><br /><span style="font-size:small">&nbsp;很多同学都在问这个问题，我建议大家着重考虑两点：其一是如何设计一种有效的方案;其二是如何将这种方案做好。例如很多同学提到了主备方案，在这种方案中，备用接管主用之前的这段时间内，显然是不能正常处理用户接入请求的。如果大家对这种方案不满意，那么能否想到更好的方案?如果不能想到更好的方案，那么能否考虑尽量将接管时间做的很短，对用户带来的影响最小?</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">7. 专家您好：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;我们组的问题：SysCtrlNode重启过程中(尚未恢复)，某负荷节点异常退出，该负荷节点关联的用户在其它负荷节点满载(我们组设计的负荷节点关联用户有数量限制，比如一个负荷节点最多关联20个用户)的情况下，可否删除这些用户数据???</span></span><br /><span style="font-size:small">&nbsp;请自行考虑，提醒一下关于用户数的限制应不是题目本身的要求。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">8. 专家您好：总控节点关闭后，plNode节点全部关闭，总控节点再重启，之前接入用户是否全部删除?</span></span><br /><span style="font-size:small">&nbsp;请自行考虑。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">9. 既然不需要总控节点，就能接入并释放用户，那总控节点有什么用?题目原话“假使SysCtrlNode重启” 这个应该是重启后吧，而不是重启期间吧。麻烦专家问问出题人，让出题人确认下，是不是包括重启期间和重启后，这个问题有点纠结啊?</span></span><br /><span style="font-size:small">&nbsp;题目本身并没有要求“不需要总控节点，就能接入并释放用户”，这应该是同学根据题目对SysCtrlNode瘫痪时的要求自行推导出来的结论。关于这个问题，前面的答复已经说了很多，请参考一下。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">10. 专家您好：我想问一下，PlNode可以和用户进程通信吗?在主控制节点重启时，是否可以不用考虑用户的均衡分配?</span></span><br /><span style="font-size:small">&nbsp;PlNode不可以和用户进程通信，其他请参考上面的答复。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">11. 您好，</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;请问需要考虑PINode的异常断开吗?</span></span><br /><span style="font-size:small">&nbsp;需要考虑PlNode的热插拔，即接入新的PlNode或已有的PlNode退出。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">12. 请问专家：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;PINODE结点之间可以进行通信吗?</span></span><br /><span style="font-size:small">&nbsp;不可以。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">13. 专家，您好：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;请问：如果总控结点崩溃时，PINode结点也崩溃。题目要求不影响用户，那么是在总控结点启动后，保持用户，还是不启动总控结点就能保证PINode之间协调?</span></span><br /><span style="font-size:small">&nbsp;如前答复所述，这涉及到您的方案如何设计。更详细的内容可参见上述答复。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">14. 如果总控节点瘫痪，一个小时以后才重启，要求对用户的服务没有影响，那在这一个小时以内是不会得到服务的。请问：用户可以得到服务，但对用户的服务有很大的延迟，算用户得到服务吗?</span></span><br /><span style="font-size:small">&nbsp;如前答复所述，这涉及到您的方案如何设计。更详细的内容可参见上述答复。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">15. 专家您好：针对SysCtrlNode 崩溃问题，可以采用两个SysCtrlNode 进程，但这两个SysCtrlNode 进程间的通信还要求用Socket吗?插拔PlNode 时，由于SysCtrlNode 和PlNode数据的交互(用户再分配)，会影响用户的接入和释放，这符合要求吗?</span></span><br /><span style="font-size:small">&nbsp;第一个问题：两个SysCtrlNode 进程是一种可以考虑的设计方案，之间采用Socket通讯也是一种可用的选择。</span><br /><span style="font-size:small">&nbsp;第二个问题：支持PlNode热插拔的要求具体请参见题目描述，已经很清楚了。如果你是指SysCtrlNode崩溃的同时PlNode热插拔，此时如何将对用户的影响减到最小就是您的设计方案应该详细考虑的事情了。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">16. 控制节点崩溃重启后，要保证用户节点还是分给原来的那个负载节点吗?还是可以重新均衡分配啊?</span></span><br /><span style="font-size:small">&nbsp;保持原状是一种更好的实现。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">17. 请问专家，你说只能用题目规定的三类进程，我想请问一下，你说的“一类”是指功能相同的进程，还是指程序代码完全一样的进程?比如关于SysCtrlNode进程，为了处理瘫痪，我设计了两个SysCtrlNode进程，功能一样，但程序不一样，算是一类进程吗?</span></span><br /><span style="font-size:small">&nbsp;一套代码是一种更好的实现。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">18. 用不用考虑，总控节点关闭后，plnode节点关闭的情况?</span></span><br /><span style="font-size:small">&nbsp;请自行考虑。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">19. 请问专家：可以用测试程序启动SysCtrlNode进程和PlNode吗?</span></span><br /><span style="font-size:small">&nbsp;题目对此没有明确要求，但我理解这并不是一种更好的选择。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">20. 您好!根据目前的理解总控节点的瘫痪只能是在总控节点进程结束时才会发生，其它的瘫痪情况都应是系统设计导致的Bug。请问如果是这样理解，瘫痪时根本无法保证用户的正常服务。而解决瘫痪后才能正常服务。这样理解正确吗?</span></span><br /><span style="font-size:small">&nbsp;这取决于您的设计方案，具体可以参考之前答复。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">21. 您好!请问负荷节点之间可以通行吗?</span></span><br /><span style="font-size:small">&nbsp;不可以。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">22. 麻烦专家了 请问</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;一 主控进程崩溃期间(挂后未重启)，对于此时用户的接入请求，需要立即做接入处理吗， 如将请求延迟至主控恢复再处理是否符合要求?</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;二 若主控使用双进程 挂掉一个进程 算不算符合题意中的“主控瘫痪”?</span></span><br /><span style="font-size:small">&nbsp;一：请参考之前的答复。</span><br /><span style="font-size:small">&nbsp;二：符合。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">23. 请问专家，如果我写出一个一旦崩溃立即重启(没有时延)，永远也关闭不了的SysCtrlNode，这样的话用户在崩溃时唯一感到和平时不同的只是应答延时略大，但不到1秒，请问这满足要求吗?</span></span><br /><span style="font-size:small">&nbsp;如果您能写出这样的代码，应该也算一种实现方案，但是否是最优或较优的设计方案就需要您自己斟酌了。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">24. 1.总控宕机，不管是原来的还是备份的 总是有一个要重新建立连接的过程(最快)，请问这个过程所耗费的时间是否属于 让 用户感受到总控宕机?</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;2.另外test封装的API是否可以检测总控宕机，此时不确定是否发送请求成功，可以用一种机制来确保稍后(很快)重新发送请求成功?3.可否认为总控宕机的概率十分小?我暂时还没有条件测到那么严重的BUG，所以只能TEST发起一个请求使其中一个宕机是否可以?</span></span><br /><span style="font-size:small">&nbsp;1：在您所描述的单节点或主备方案中，不属于。</span><br /><span style="font-size:small">&nbsp;2：请自行考虑，我觉得如果单单依靠该策略来解决主控瘫痪问题，应该不是一个最优或次优的选择。</span><br /><span style="font-size:small">&nbsp;3：手工直接杀死总控也是一种主控瘫痪的方式。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">25. 请问专家，当总控节点崩溃，关闭后，为了保证系统能继续服务，能设计当总控节点关闭后，自动开启一个总控节点吗?</span></span><br /><span style="font-size:small">&nbsp;可以认为是一种解决方案。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">26. 专家您好：如果采用备份SysCtrlNode，当正在服务的SysCtrlNode故障时，SysCtrlNode开始服务。在这个过程中，测试进程必须得和该备用SysCtrlNode建立连接，这会使得用户感知到宕机吗?</span></span><br /><span style="font-size:small">&nbsp;在主备方案中，在备用接管主用之前保证用户不感知到主控故障可能是难以做到的。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">27. 专家您好，系统瘫痪时，用户可以正常接入和释放，对负载节点有热插拔功能要求吗?</span></span><br /><span style="font-size:small">&nbsp;有。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">28. 专家您好!看了这么多提问回答，实在受不了了，我只想问一个问题：请问出题和回答问题的是同一个人吗?请正面回答，谢谢!</span></span><br /><span style="font-size:small">&nbsp;同学你好!出题和答题不是由同一个人完成的，但是由同一个团队完成的，一个人无法承担如此巨大的工作量，出题是专家一起讨论出的，答题是专家团队分担的。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">29. 专家您好，关于主控节点崩溃的处理问题，我从专家回答我们提问的问题中，看到了两种截然不同的观点：一种是总控节点关闭后，如果在测试进程上有任意用户服务，会提示：总控节点进程服务器正繁忙，请稍候再请求服务;另一种观点是即使总控节点关闭，用户也能得到正常服务。请问专家到底是哪种观点。</span></span><br /><span style="font-size:small">&nbsp;我觉得设计方案不是唯一的，但是不同的设计方案之间存在优劣，同学们提出的问题中描述了自己的设计方案细节，严格说起来很多都是可行的，但不一定是最优的。我们在回答问题时，并不能直接指出孰优孰劣，这一点还请大家理解。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">30. 请问专家：我可以要求系统的运行环境只能是32位系统吗?</span></span><br /><span style="font-size:small">&nbsp;不能。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">31. 请问专家：1.我想在测试进程采取短连接的方式，即每次测试进程发送连接，释放或者查询节点的请求时都独立发起连接，得到应答后释放连接，但是这样每次请求的时间会比原来长，可能超过1秒，这样是否允许?</span></span><br /><span style="font-size:small">&nbsp;题目没有明确反对的可以认为是可行的，但是可行的不一定表示最优的，请自行考虑。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">32. 2因为我的SysCtrlNode响应是一样的，延长的只是连接建立的时间，若上面被允许，这样的作品会认为比以前连接一直存在的系统性能差吗?</span></span><br /><span style="font-size:small">&nbsp;坦率地说，我觉得性能是变差了。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">33. 专家你好，备用总控节点和原来的总控节点算是一类进程吗(代码和功能有很小不同，但主要功能相同)。</span></span><br /><span style="font-size:small">&nbsp;如前所述，一套代码实现是一种更好的选择。</span><br /><span style="font-size:2"><br /></span><span style="font-size:small"><b><span style="font-size:3"><span style="color:#ff0000">   【7.20汇总】</span></span></b><br /><span style="color:#800080">1、如果能保存TXT，那负荷节点热插拔还有所有负荷节点关闭都可以通过写TXT来读取用户~不知道这样符不符合复赛要求~求专家回复~</span><br />A：根据设计需求自行决策</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">2、专家您好：能否这样理解，SysCtrlNode瘫痪过程中产生的所有用户服务请求只由测试进程提示其等待；SysCtrlNode恢复工作后测试进程提示用户重发上述服务请求或者做其他能保证这些服务请求不丢失的操作，SysCtrlNode的其他工作情况则与瘫痪前相同？</span><br />A：该问题请参见7.19汇总的问题12</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">3、专家，您好：    我想问两个问题：1.如果SysCtrlNode在重启过程中，某个PINode也崩溃了，怎么考虑这个PINode处理的用户，是直接删除，还是等SysCtrlNode重启之后，再将这些用户信息交由其他PINode处理。2.在专家的回复中，说在SysCtrlNode重启的过程中，用户感受不到它崩溃了，但是，如果SysCtrlNode崩溃了，而题目也不允许用例进程与PINode进行通信，当测试用例启动时，怎么能让测试用例感受不到SysCtrlNode崩溃呢？还是我的理解有误？非常感谢！</span><br />A：1. 该问题请参见7.19汇总的问题11第1问<br />2. 该问题请参见7.19汇总的问题12</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">4、专家，您好！我想问一下：1.测试用例是一直与SysCtrlNode连接着，还是一次测试用例运行完就与SysCtrlNode断开？2.测试用例是要设计成交互式的，由用户自己决定接入用户还是释放用户？还是在测试用例中直接由开发者决定接入用户或释放用户？非常感谢！</span><br />A：1.根据设计需求自行决策<br />2. 该问题请参见7.18汇总的问题3</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">5、请问专家，同【7-18】问题11（1）。是否：测试进程可以开启/关闭 总控节点与负荷节点。如果可以，那测试进程的权限未免太大了。</span><br />A：根据设计需求自行决策</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">6、请问专家同志，如果在系统增加额外的节点算不算违背题意呢</span><br />A：只能有题目所说的三类进程</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">7、总控节点崩溃了的话我查询某节点用户数或者某用户所在节点显然是得不到回复的，这时我返回系统繁忙也算正常进行业务吗？</span><br />A：不算正常服务</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">8、具体来讲就是如果测试进程添加了部分用户，然后关了，那么这些用户应该也算在线吧？在这样的情况下，如果SysCtrlNode崩溃，期间有一个PINode拔出，那么SysCtrlNode重启后这个PINode上的用户就无法被系统发现了，也就相当于释放了。</span><br />A：用户没有释放</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">9、总控节点瘫痪，可不可以不处理想要申请加入、瘫痪之前未加入的用户？？</span><br />A：该问题请参见7.19汇总的问题12</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">10、在总控节点重启过程中，测试节点不能与除总控节点外其他任何节点通信，而用户的分配和释放都需要总控节点来执行，难道需要再设置一个监视进程如果发现总控节点瘫痪就代替总控节点吗？那如果这个监视进程也瘫痪了呢？</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">11、真心希望系统繁忙也属于不影响系统业务。。。等候专家回复。</span><br />A：该问题请参见7.19汇总的问题12</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">12、总控节点瘫痪了（瘫痪应该是不只是重启），未接入的用户不能再连总控节点的Ip了，plnod的是热插拔的，逻辑上也不能把Plnode的IP当参数传给用户，用户对这个系统一无所知，请专家确认一下“总控节点瘫痪一定要使未接入的用户接入系统”？？专家是否允许自行设计底层网络拓扑，以及相应的硬件支持？</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">13、专家您好，如果主控节点瘫痪了，新的用户还可以接入，也可以释放，那么这个主控节点不是没有存在的必要了么？用户完全可以不通过主控节点就可以接入和释放了？</span><br />A：该问题请参见7.19汇总的问题20</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">14、1为了方便测试，为TEST增加了两个API，一个用于实现PLnode的拔出，一个重启总控节点，并且总控和Plnode都支持这两个API的实现。在不影响初赛的四个API功能以及复赛的Pnode的直接手动热插拔和直接重启功能的条件下，是否对评分有影响，因为毕竟该系统本身没要求需要支持这些API的实现。若有影响请专家给出回复，我去除这两个API！十分感谢！2.系统是否可暂不考虑单个PlNode的上限，只对整个系统（1-5个Plnode的情况）可接入的总用户数给一个上限？3.可以假设总控瘫痪后是以最快速度修复（重启）吗？</span><br />A：1. 可以自行设计<br />2. 根据设计需求自行决策<br />3. 不一定最快速度恢复</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">15、一。看这种情况：用户A正在申请接入，刚好SYS在处理A的请求时瘫痪了。我的办法是TEST进程重新发送用户A的接入请求，直到SYS启动好并处理了A的请求，这整个过程对于用户A是透明的，这样算“用户感知SYS宕机”吗？二。添加SYS的监视进程或者SYS的备用进程，这样违规吗？</span><br />A：1. 算<br />2. 只能有题目所说的三类进程</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">16、请问专家：    1 总控结点瘫痪的情况下，如果此时有负荷结点释放，您说此时该负荷结点所负荷的用户不允许丢失，请问：这些用户需要被实时的（就是在总控结点未启动之前）重分配到其他的负荷结点上吗？如果是，重分配算法谁来去做？如果不要求实时重分配，仅要求用户信息不丢失，那么此时若测试结点有查找那些用户当前正在被哪个负荷结点所负荷时，该返回什么？2 问题原理同上：总控结点瘫痪的情况下，此时测试结点有建立新用户请求，系统需要能够正常工作，那么此时均衡调度负荷结点服务该用户的算法谁来做？难道可以自行调度？   望专家能够详细解答，谢谢</span><br />A：1. 要求实时重分配<br />2. 请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">17、请问“热拔出”的是时候，是不是也意味着PLNode进程需要关闭？</span><br />A：该问题请参见7.17汇总的问题5</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">18、专家您好，请问不允许用户和负载节点直接通信怎么理解？例如：每次用户连接都是先向控制节点发起连接，这样通过控制节点分配Pload后用户跟Pload建立通信，算是直接通信么？</span><br />A：用户不能跟PlNode直接通信</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">19、请问专家：“假使SysCtrlNode重启，对于已接入的用户服务没有影响，通过测试用例进程仍能正常释放已接入的用户，也能正常接入新用户”，是指重启过程还是重启后？</span><br />A：既包括重启过程中，也包括重启后</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">20、你问的三个问题问的好。我感觉专家是不是把错了题的方向，在SysCtrNode死机后（未重启前），TEST进程还要能发出那几个API，要正常处理用户接入等操作？简直是无语。均衡分配谁做?总控谁做？既然TEST进程只能连接SysCtrNode而不能与PlNode通信，那么在SysCtrNode重启前，是不可能完成4个API的工作的。就像是你把路由器关了，你还能用联网吗？</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">21、专家您好，我还是希望您再考虑一下。Sys进程当机后，未重启前，系统就没有核心服务，TEST进程何来正常运行那4个API进行用户接入等操作？有个同学说在这种情况下“假装”完成，但您一口回绝不能装，要真的完成。我想说，如果这种情况可以，那么系统大可不要Sys进程了！</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">22、题目要求TEST进程只能与SysCtrNode进程交互，不能与PlNode通信。在SysCtrNode当机时，TEST真的没有对象可以通信了，根本不可能完成API请求。还是那个比喻：路由器死机了，还能联网吗？这商业化的产品尚且如此(理应如此)，何况这个呢？</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">23、第一次请问一下专家：总控节点已经崩溃时，用户不与负荷节点通信的情况下还能被接入和释放？</span><br />A：请自行考虑设计方法</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">24、专家您好：我觉得大家一直纠结在SysCtrlNode崩溃时系统怎么保证Test用户服务正常这个问题上的原因应该是您对系统宕机到重启这段时间没有定量定义，如果系统宕机到重启花了一个小时，我们总不能保证这一个小时内我们的测试程序还能不断得到正常的服务吧？</span><br />A：这一个小时内，依然需要得到正常服务</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">25、关键是请告诉我们系统到底需要支持多长时间的崩溃而不被用户察觉，用户容忍体验的底线是什么？</span><br />A：无论多长时间，都不能被用户察觉</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">26、看来大家都在同一问题上纠结徘徊。目前，在现实生活中不管是游戏服务器还是公司服务器好多情况下都不止一台。如果有其中一台服务器出现崩溃的情况，备用服务器则启用。这样的话用户能够进行正常的数据交互，而感觉不到服务的中断。所以针对本任务我们也可以在初始化的时候启用两个SysCtrlNode进程，使用其中一个进程进行数据交互，另一个进程作为备用进程，从而问题迎刃而解（题目没有要求说只能打开一个SysCtrlNode进程）。这只是个人想法而已...</span><br />A：可以这么设计</span></span></span><br /><span style="font-size:medium"><span style="font-size:3px"><span style="font-size:small"><span style="color:#800080">27、请问总控重启的过程中如果再次被异常关闭需要考虑吗？</span><br />A：请自行考虑各种异常处理<br /><br /><br /><span style="color:#ff0000"><b><span style="font-size:small">&nbsp;【7.19汇总】<br /></span></b><span style="font-size:small"><span style="font-size:small"><span style="color:#800080">&nbsp;1. 专家您好：</span><br /></span><span style="color:#000000"><span style="font-size:small"><span style="color:#800080">&nbsp;请问专家，可否用文件(如txt文档)或日志的方式来保存总控节点的运行信息，以便用在总控节点重启时读回原先的状态?谢谢!</span><br />&nbsp;题目没有明确规定，请自行设计。<br />&nbsp;<span style="color:#800080">2. 专家您好：专家回复说不能使用第三方数据库。当SysCtrlNode关闭后，如果PlNode也刚好热插拔，则该PlNode所服务的用户将彻底丢失，故无法满足复赛的第2个要求。所以我们是否可以使用txt文档来存放用户信息。还是此次比赛允许上述情况的用户丢失。</span><br />&nbsp;不允许用户丢失<br />&nbsp;<span style="color:#800080">3. 专家您好：在感悟之任务四中提及程序应该提供给评委通过UI来手工输入执行测试用例。我记得初赛时专家组说不能使用MFC，试问复赛能否使用MFC制作这个UI界面，还是可以再黑屏下输入测试用例，再或者将测试用例写入txt文档，启动test时自动读取并执行该测试用例。</span><br />&nbsp;界面没有要求，测试方法可以自行设计，但最好留有开放手段手工测试。<br />&nbsp;<span style="color:#800080">4. 专家您好：</span><br /><span style="color:#800080">&nbsp;1.总控节点瘫痪的情况下，有一个PlNode在此期间也被异常关闭，那么该PlNode上之前负载的用户怎么处理?也是彻底的断开和丢弃吗?</span><br />&nbsp;不允许用户丢失<br />&nbsp;<span style="color:#800080">2.测试进程的每个API是在测试进程开启后由测试人员输入请求还是直接写好多个case?</span><br />&nbsp;请提供完备的测试用例，满足功能的要求。但最好留有开放手段供手工测试。<br />&nbsp;<span style="color:#800080">5. 专家您好：</span><br /><span style="color:#800080">&nbsp;之前您曾回复说测试进程关闭前最好询问下是否需要释放所有用户，那我是否可以理解为用户连接类似于短连接，用户是否在线仅取决于SysCtrlNode中的用户记录而与实际的TCP连接无关，用户释放的唯一途径便是测试进程发送的释放用户请求?</span><br />&nbsp;没明白。用户是否在线不仅取决于sysctrlnode的记录，负载节点plnode也是需要考虑的。<br />&nbsp;<span style="color:#800080">6. 专家你好：</span><br /><span style="color:#800080">&nbsp;当SysCtrlNode发生瘫痪的情况下(例如重启还没有启动好)，系统是否可用，即是否能够正常释放已接入的用户和接入新用户。</span><br />&nbsp;要可用<br />&nbsp;<span style="color:#800080">7. 总控节点瘫痪，势必要重启呀。请问除了题目中的进程外，可以添加额外的进程吗?“总控节点重启，已接入用户在重启后不需要重新接入。”如果采用tcp连接，总控节点重启后自动tcp重新接入。这样满足题目要求吗?“不需要重新接入”怎么理解</span><br />&nbsp;请自行考虑设计。总控节点重启，不影响之前的业务。<br />&nbsp;<span style="color:#800080">8. 专家你好：</span><br /><span style="color:#800080">&nbsp;如果总控节点瘫痪和重启是两种情况的话，假如总控节点瘫痪了，系统的解决方法可以是重启总控节点吗?</span><br />&nbsp;请自行考虑设计方法<br />&nbsp;<span style="color:#800080">9. 您好：针对7月17号第一题第二问的回答; (2)题目要求的是SysCtrlNode发生瘫痪的情况下(SysCtrlNode重启只是其中一种情况而已)，系统仍然能够正常运行，请在此前提下进行考虑。这句话的意思是：总控瘫痪之后，test可以直接与pLNode通信吗?请回复，谢谢啦!!</span><br />&nbsp;不允许<br />&nbsp;<span style="color:#800080">10. 这下真心不明白了，求专家组指导一下方向……这个节点突然拔掉，又没有通知总控节点。总控节点如何怎么就能及时处理呢?难道让总控节点一直探测啊?很不理解。</span><br />&nbsp;请考虑自行设计<br />&nbsp;<span style="color:#800080">11. 1.总控节点瘫痪的情况下，有一个PlNode在此期间也被异常关闭，那么该PlNode上之前负载的用户怎么处理?是丢弃吗?</span><br />&nbsp;不丢弃，PlNode拔出，系统保证为之前接入的用户继续服务;<br />&nbsp;<span style="color:#800080">2.我设计时考虑TEST可以主动发出信令 拔出一个PlNode或者RESET总控节点，请问可以吗?</span><br />&nbsp;测试用例可以自行设计<br />&nbsp;<span style="color:#800080">3.TEST调用API或者跑某个测试用例时，能否设计成不是代码写死，而是由测试人员主动输入呢?</span><br />&nbsp;测试用例可以自行设计，但原则是满足功能测试，最好提供开放接口供手工输入测试<br />&nbsp;<span style="color:#800080">12. “ 2.重启过程中，用户也感受不到sys当机”</span><br /><span style="color:#800080">&nbsp;回复专家组:在总控节点重启过程中的1-2秒内肯定是不能提供接入和查询服务的吧，测试节点在这段时间内怎么会感觉不到呢?</span><br /><span style="color:#800080">&nbsp;我理解这里的“感觉不到sys宕机的用户”只是指那些“已经接入的用户”而不包括“要申请接入的用户”，对吗?</span><br />&nbsp;理解不对，感知不到宕机，后续申请接入也应该能正常进行。<br />&nbsp;<span style="color:#800080">13. 我感觉如果在总控节点瘫痪的情况下有负荷节点瘫痪，那些接入到该负荷节点的用户只有悲剧地被丢弃了，因为没有其他进程可以与负荷节点通信。</span><br /><span style="color:#800080">&nbsp;对吗?</span><br />&nbsp;不允许被丢弃，请考虑设计<br />&nbsp;<span style="color:#800080">14. 专家您好，还是不太明白控制节点瘫痪的时候怎么保证用户感觉不到控制节点当机了，用户都是通过控制节点接入和释放的，如果控制节点当机了，势必是不可能进行接入和释放的。只有重启完之后才能进行接入和释放吧?</span><br />&nbsp;请考虑设计<br />&nbsp;<span style="color:#800080">15. 请问，主控节点挂掉重启后，需不需要保持各个负载节点上的用户数和原来的一样?也就是说，测试进程发现某用户不在原来的负载节点上服务算不算“察觉到主控节点挂掉”??谢谢~</span><br />&nbsp;主控节点挂掉不影响其他业务。<br />&nbsp;<span style="color:#800080">16. 复赛中进程的个数最多能否超过7个?</span><br />&nbsp;题目没有要求<br />&nbsp;<span style="color:#800080">17. 专家您好，我个人对热插拔的理解：测试程序不可以发出对plnode热插拔以及控制节点重启的命令，因为用户是不能直接操作服务器的，如果用户都能操作服务器，那这是不合逻辑的。只有plnode自身或者控制节点可以对plnode进行热拔操作。而控制节点也不可以对plnode进行热插的命令，因为本身plnode和控制节点是独立的，就像电脑不能叫U盘热插一样。但是plnode可以对自己进行热插操作。而控制节点的重启只能通过控制节点自己的命令行进行重启或者手动关闭再打开。不知是否正确?</span><br />&nbsp;可以这么设计<br />&nbsp;<span style="color:#800080">18. 专家您好：关于SysCtrlNode崩溃期间用户感觉不到系统当机，是指此期间测试进程的用户连接和用户释放操作都返回“网络繁忙”，还是假装完成，在系统恢复后在一起发送这些请求?2.对于测试代码分成PINODE=0-5这么多情况，我觉得分成0和非0两种情况就行了，只要最后还有负荷节点，不管PINODE个数，怎么热插拔，怎么重启，测试端用户体验难道不是一样的吗?为什么就不可以用同样的代码呢?3.我之前一直都为每个负荷节点设置了一个最大负荷，比如说1000个用户，这样就可能有时用户接入会被拒绝，更可怕的是负荷节点“拔出”时会使系统总容量减小，这时拔出负荷节点中的部分用户可能最后会被强制释放，这就与复赛要求略有出入了，我是否有必要去掉最大负荷这一限制?</span><br />&nbsp;1. SysCtrlNode崩溃期间用户要能正常进行业务，不是假装完成。<br />&nbsp;2. 多个plnode是考虑负荷分担，实现时代码可以一样<br />&nbsp;3. 最大负荷限制可以不用去掉，如果不是所有plnode业务都满的情况下接入被拒绝是你负荷分担有问题。如果都是满负荷，热插拔时超出的部分用户被释放可以接受<br />&nbsp;<span style="color:#800080">19. 我想问一下当系统的5个负荷节点都被拔掉时，那之前接入的用户要怎么处理?因为题目要求新插入的负荷节点只为新接入的用户进行服务，之前接入的用户要全部丢掉吗?</span><br />&nbsp;如果负荷节点全部拔掉，之前的用户可以丢弃<br />&nbsp;<span style="color:#800080">20. 专家您好：前面我看您说： 总控节点断开到重启的过程中，用户感受不到sys宕机，此时用户如果申请服务，不就感受到宕机了吗?还是此时默认用户停止向总控节点申请服务?</span><br />&nbsp;请考虑设计方法。用户只能向总控节点申请服务，不允许向plnode节点申请。<br /></span><span style="font-size:small"><br /></span></span></span><b><span style="font-size:small"><br />&nbsp;【7.18汇总】</span></b></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;1.假使SysCtrlNode重启，对于已接入的用户服务没有影响，通过测试用例进程仍能正常释放已接入的用户，也能正常接入新用户。如果重启之前，是第一个PlNode为测试用例服务，重启后是否要求PlNode不变，仍是第一个PlNode为其服务？</span></span><br /><span style="font-size:small">&nbsp;请见7月17日问题1中2、3两小问的答复。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;2.专家您好：专家回复说不能使用第三方数据库。当SysCtrlNode关闭后，如果PlNode也刚好热插拔，则该PlNode所服务的用户将彻底丢失，故无法满足复赛的第2个要求。所以我们是否可以使用txt文档来存放用户信息。还是此次比赛允许上述情况的用户丢失。</span></span><br /><span style="font-size:small">&nbsp;这是具体实现，请自行决策，但如果不符合题目，自然算功能缺失。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;3.专家您好：在感悟之任务四中提及程序应该提供给评委通过UI来手工输入执行测试用例。我记得初赛时专家组说不能使用MFC，试问复赛能否使用MFC制作这个UI界面，还是可以再黑屏下输入测试用例，再或者将测试用例写入txt文档，启动test时自动读取并执行该测试用例。</span></span><br /><span style="font-size:small">&nbsp;需要提供完整的测试用例，方便检验正确性以及功能的实现。</span><br /><span style="font-size:small">&nbsp;但如果参赛者不能确保能完全检验的，要有开放的手段，方便我们去手工验证，否则如果功能没法验证肯定是要影响评分的。</span><br /><span style="font-size:small">&nbsp;不需要界面，用shell交互就可以了。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;4.同问 所有API的调用或者TEST发起的RESET请求是否是直接写成测试用例？还是每个测试用例怎么使用API或者请求的发出都由专家来在终端下手动进行输入？</span></span><br /><span style="font-size:small">&nbsp;同问题3回复</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;5.专家您好，请问：如果有两个版本是同样的程序实现（功能完全一致），只是一个是控制台程序，另一个是有UI界面的，那么在复赛评比时，UI界面的那个版本是不是会胜一筹呢？我发现用C写Windows界面程序非常麻烦，我觉得不应该把精力放在界面上，而应该注重功能的实现完整性、可靠性等。</span></span><br /><span style="font-size:small">&nbsp;题目没有提界面的事，评分关注界面以外的很多考察点。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;6.专家您好，初赛的测试用例要求使用assert来验证，复赛是否还是有这个要求?</span></span><br /><span style="font-size:small">&nbsp;同问题3回复</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;7.专家您好：我想问下复赛测试例程和初赛测试例程是否是合成一个？还有初赛的GetPnodeByUser（A）查询用户A的PlNode标识和GetUserNumByPnode(B)</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;PlNode B进程当前处理的用户数这两个是否需要在复赛测试中体现？</span></span><br /><span style="font-size:small">&nbsp;是否合成一个测试用例和测试完备是两回事，最重要的是关注可测试性，请见问题3回复。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;9.专家同志：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;您好！</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;现在用户和负载通信还必须通过控制节点吗？可以直接通信吗？</span></span><br /><span style="font-size:small">&nbsp;总控节点的作用和初赛一致，绕开总控节点，功能自然不对了。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;10.专家您好，我想问一下，主控节点挂掉重启后，需不需要保持每个用户所在节点和之前的一样？还是说只要保证用户的接入释放还有服务正常就行呢？谢谢~</span></span><br /><span style="font-size:small">&nbsp;题目中已经说明对已接入用户没有影响，即从用户角度看没感觉到主控节点坏掉了。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;11.请问专家：1.我可不可以不考虑由TEST发送信令关闭总控节点或负荷节点这种情况而采取直接关闭相应进程的方法实现重启和热插拔？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;2.无论是用例1还是用例2在热插拔重启前测试进程都得接入一定量的用户，这些用户是由评委老师操作逐个添加还是我在程序中一次性添加若干？</span></span><br /><span style="font-size:small">&nbsp;1.可以，从方便测试角度是可以，但是要符合“拔出、重启”的行为。</span><br /><span style="font-size:small">&nbsp;2.这个请自行决策，但能自动化测试的代码肯定是更好的。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;12.专家您好，有以下几个疑问，望请回复：（1.）复赛要求在初赛已完成的系统上实现，初赛时要求用户和负载节点之间的通信必须经过控制节点，现在完成复赛的系统设计时，通信过程还必须经过控制节点么？（2.）请问是SysCtrlNode瘫痪重启的过程中，还是SysCtrlNode重启之后，对于已接入的用户服务没有影响，通过测试用例进程仍能正常释放已接入的用户，也能正常接入新用户呢？（3.）SysCtrlNode瘫痪之后，与它通信的socket就会断开连接，SysCtrlNode重启后之前与其通信的socket还需重新连接么？</span></span><br /><span style="font-size:small">&nbsp;1.是的。</span><br /><span style="font-size:small">&nbsp;2.重启过程中，用户也感受不到sys当机</span><br /><span style="font-size:small">&nbsp;3.请自行考虑</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;13.您好：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;关于第二点要求，请问SysCtrlNode节点崩溃后，原先已接入的用户仍然能够享受PINode服务，还是服务暂停，SysCtrlNode节点恢复正常后才能继续享受服务？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;谢谢！</span></span><br /><span style="font-size:small">&nbsp;见上个问题第二小问</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;14.专家您好：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;总控节点原先连有两个PlNode A和PlNode B节点在服务用户 ，现在新接入一PlNodeC节点。如果不接入用户 PlNodeC节点用户就是0，是否需要把负荷节点A,B的用户分配给节点C，还是 PlNode C一直保持为0，直到有用户接入为止？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;谢谢~</span></span><br /><span style="font-size:small">&nbsp;请仔细阅读题目，题目中已有。</span><br /><span style="color:#ff0000"><b><span style="font-size:small"><br /><br />     【7.17更新】</span></b></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;1.问题一：PlNode拔出，其服务的用户有n个，此时由SysCtrlNode节点负责重新均衡分配该n个用户，还是通知用户断开，由用户重新建立连接？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;简言之，该重新均衡的过程是否对测试进程透明？问题二：SysCtrlNode重启后对用户没有影响。个人理解：SysCtrlNode重启之后，能够自动恢复到先前的状态（如与测试进程的连接，PlNode的连接，PlNode的负载状况等），而在重启的过程中，测试进程以及PlNode节点都不应该有任何的操作。这样理解是否正确？问题三：复赛的测试用例需要构造PlNode为0~5的不同情况。用例本身就是通用的，和PlNode节点的个数有什么关系？不知道这个是什么意思，还请专家解答。</span></span><br /><span style="font-size:small">&nbsp;(1)请参见7.16汇总问题15的回答。</span><br /><span style="font-size:small">&nbsp;(2)题目要求的是SysCtrlNode发生瘫痪的情况下（SysCtrlNode重启只是其中一种情况而已），系统仍然能够正常运行，请在此前提下进行考虑。</span><br /><span style="font-size:small">&nbsp;(3)这个要求的含义是，PINode无论有几个处于可用状态，对应的各项测试用例都应该是通过的，这样才能验证PINode拔出后没有影响原有用户的服务和系统的功能。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;2.我想请问一下。题目中“热插拔”的具体含义是什么？是负荷节点，主动离开工作区，并通知总控。并在负荷节点欲加入工作区时，主动通知总控？还是类似于负荷节点，离开和加入工作区时，并不通知，需要总控节点主动探知？亦或是什么意思？</span></span><br /><span style="font-size:small">&nbsp;请参见7.16汇总问题19的回答。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;3.负荷节点不是热插拔的吗，测试用例限制plnode为0~5不同的情况要求plnode就是固定的个数进行测试，热插拔的特性怎么体现？</span></span><br /><span style="font-size:small">&nbsp;比如说，原本是5个PINode在运行，所有测试用例都能测试通过；当拔出1个PINode后，还剩下4个PINode在运行，此时所有测试用例仍然需要能通过。当然，以上仅仅是其中一种场景，其他的场景需要选手自行考虑和设计。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;4.控制节点可以使用数据库吗？比如mysql</span></span><br /><span style="font-size:small">&nbsp;请参见7.16汇总问题13的回答。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;5.专家您好，我想问一下Plnode的热拔是指用户直接将Plnode的进程关掉么？控制节点的重启是指用户手动将控制节点进程关掉了再打开么？</span></span><br /><span style="font-size:small">&nbsp;进程被关闭是其中一种情况，其他场景请自行考虑。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;6.请问专家：能否这样理解，当总控节点进程发生瘫痪，负荷节点进程不能接受测试进程发送的指令(因为负荷节点进程和测试进程不能直接通信)，只有等总控节点进程恢复正常后才能重新通信。如果总控节点一直处于瘫痪状态，那整个通信处于中断状态。</span></span><br /><span style="font-size:small">&nbsp;请注意题目要求：“SysCtrlNode在系统中扮演了重要的角色，如果它发生瘫痪（如重启）将导致系统不可用，请设计方法实现解决该问题。”SysCtrlNode重新启动只是其中一种场景，其他场景下的处理也需要设计和实现。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;7.请问专家：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;1.同【7-16】问题8</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;当Plnode总数为0时，也要设计几个用例进行测试吧。</span></span><br /><span style="font-size:small">&nbsp;是的，PINode总数为0时，肯定也是存在需要测试的场景的。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;8.同【7-16】问题4 -(4):能否这样理解：在PlNodeA和PlNodeB都关闭后（这时已经没有PlNode进程了），取消了用户x和用户y的服务，但再打开一个新的PlNode进程，则这个新的PlNode进程将重新接入用户x和用户y。</span></span><br /><span style="font-size:small">&nbsp;PINode数目为0的情况下，可以允许用户被彻底断开和丢弃，后续无需重新接入。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;9.当一个负载节点拔掉之后，控制节点需要立即作出处理吗？</span></span><br /><span style="font-size:small">&nbsp;负载节点拔掉后，控制节点必须立即进行后处理。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;10.请问专家：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;对于函数int GetPnodeByUser(A)</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;（无效值为-1），能否自定义新的无效值-2或-3以便程序使用</span></span><br /><span style="font-size:small">&nbsp;测试用例请按照题目要求设计。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;11.您好：我想请问下，（1）关于复赛阶段的文档问题：设计文档和用户文档要全部重新写，重新设计？还是在初赛的基础上增加一个章节来说明复赛的变化？（2）关于测试的问题：我们只在Xp上测试通过可以吗？还要进行Win 7上的测试吗？</span></span><br /><span style="font-size:small">&nbsp;(1)文档只要求清晰正确，至于是重写还是在原有文档基础上修改，请自行决定，不做要求。</span><br /><span style="font-size:small">&nbsp;(2)可以。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;12.请问专家，如果要编写有界面的程序，应该可以用于Windows编程相关的API吧（非MFC）？如CreateWindow等</span></span><br /><span style="font-size:small">&nbsp;在满足纯C语言编程的前提下，可以使用。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;13.我想请问下,如果当前有两个PINode-A和PINode-B，每个PInode上面4个用户，当PInode-B拔出时，此时Ｂ上的４个用户转移到Ａ上，那么后面PINode-B又插入后，此时需要在负载均衡吗（将用户A上的用户分一点到Ｂ上呢）？</span></span><br /><span style="font-size:small">&nbsp;在这种情况下无需重新分配。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;14.专家您好：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;题目说在初赛已完成的系统上实现以下需求，可以这样理解成：一开始有3个节点 在此基础上进行插拔。</span></span><br /><span style="font-size:small">&nbsp;此处主要指的是初赛所要求实现的功能在复赛中必须完全保留，对于节点数目的要求以复赛为准。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;15.1.PlNode的拔出和接入是TEST主动发信令或者直接异常退出两种都要实现？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;2.SysCtrlNode的重启，也是包括以上两种吗？那么总控的重启时与PlNode的连接也会断开吗？3.可否认为被拔出PlNode的那些用户分配到新PlNODE服务的优先级比test发来的新用户连接服务请求优先级高？还是同等优先级？4.若全部PlNode拔出是否等待第一个重新接入的PlNode，把用户都接入到该PlNode？</span></span><br /><span style="font-size:small">&nbsp;(1)请自行考虑各种可能的场景。</span><br /><span style="font-size:small">&nbsp;(2)同上；总控节点重启时，与PINode的连接自然是断开的。</span><br /><span style="font-size:small">&nbsp;(3)题目不要求考虑用户的优先级。</span><br /><span style="font-size:small">&nbsp;(4)PINode数目为0的情况下，可以允许用户被彻底断开和丢弃，后续无需重新接入。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;16.专家您好：如果当前与SysCtrlNode进程连接的只是：PlNode1，PlNode1接入了用户x。当我们关闭PlNode1，这时PINode个数为0，再打开PlNodeN，因为用户x之前处于服务状态，所以我们将用户x自动分配到PlNodeN上！请问这种做法可否？谢谢专家。</span></span><br /><span style="font-size:small">&nbsp;PINode数目为0的情况下，可以允许用户被彻底断开和丢弃，后续无需重新接入。</span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;17.请问专家：</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;（1）当系统中最后一个PlNode关闭时，那么该PlNode上的用户是直接丢弃，还是等待下一个PlNode接入后，将用户转移到新接入的PlNode上？</span></span><br /><span style="color:#800080"><span style="font-size:small">&nbsp;（2）总控节点重启后，检测到没有任何PlNode接入，此时总控节点备份的用户信息是直接丢弃还是作其他处理？</span></span><br /><span style="font-size:small">&nbsp;PINode数目为0的情况下，可以允许用户被彻底断开和丢弃，后续无需重新接入。</span><br /><br />  <b> <span style="color:#ff0000">【7.16更新】</span></b></span><br /><br /><span style="font-size:small">&nbsp;<span style="color:#800080">1.虽然没有晋级复赛，但还是想知道我们小组所提交作品有哪些不足点，请问有提供这些信息的渠道吗？<br /></span></span><br /><span style="font-size:small"><span style="color:#800000">&nbsp;因为提交的作品数目巨大，因此对于未能晋级的作品，无法一一答疑指出不足。这是任务四专家在评审结束后统一给出的评语，未能晋级的同学可以对照看看哪些地方做得不足：</span><br /></span><br /><span style="font-size:small">&nbsp;任务四的功能实现并不复杂，考察点不外乎就是多进程的SOCKET通信以及简单的分配算法，不过在评审过程中也发现了一些问题：</span><br /><span style="font-size:small">&nbsp;1、不少同学对题意的理解不够，比如题目要求测试进程需要提供API接口，这个应该是提供给用户（比如评委）通过UI来手工输入执行的。从评审过程中看，有些作品并没有按照题目要求给出测试接口。不过能够理解到这一层的设计都做得不错。</span><br /><span style="font-size:small">&nbsp;2、在设计过程中如何考虑系统的可测试性、可维护性、扩展性以及易用性等，这点是初赛阶段我们最为关注的。</span><br /><span style="font-size:small">&nbsp;（1）、可测试性，就要求作品的测试进程能够提供给用户直接执行的测试用例，以及测试用API，方便用户进行自行定制用例。从实际的作品评审来看，真正能够做到这一点的作品不多，很多的作品是系统启动就直接执行用例，执行完成后进程退出（比如可以把结果起码输出到文件），从用户（评委）的直观角度来看，很难判断用例执行的有效性以及对应功能代码的实现；</span><br /><span style="font-size:small">&nbsp;（2）、可维护性，是指出现异常或发现问题时，非常方便开发者修改。这也是我们之所以对代码规范、文档规范有详细的评分细则。就是想让同学们能够摒弃掉一般校园项目带代码、文档不规范的弊病，简单的去实践一下软件工程。</span><br /><span style="font-size:small">&nbsp;（3）、扩展性，这个对于大家进入复赛很重要。如果大家的目标不仅仅是完成初赛设计，而是进入复赛、总决赛乃至拿到最后的总冠军，那么在设计之初就应该更多的考虑扩展性，否则在进入复赛后，可能就需要推倒重来，这个工作量无疑是巨大的。设计之初多想想，如果我进入复赛，在原有的基础上，可能会有什么样的变化或者新的要求？针对变化，我的系统能不能做小量修改或者延伸就可以做到。在评审过程中，发现有的同学在说明文档中写明因为是初赛，所以就随便做做，只求实现功能通过初赛，这点我们认为是不可取的，当你不认真对待开始时，何以见得你能重视后面呢？所以认真对待每一次，考虑的更长远一些，无疑可以让你走的更远。</span><br /><span style="font-size:small">&nbsp;（4）、易用性，这点其实和可测试性类似，这次参赛作品量非常大，评委评审工作量巨大，能够让评委不需要看代码就给出结论这是优秀作品的，无疑简单操作、方便易用是首选。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">2.专家您好！请问“b)PlNode拔出，系统保证为之前接入的用户继续服务”是将此拔出的PlNode节点上的用户转移到其它PlNode上，并保证系统已接入用户继续服务还是只保证未拔出的PlNode节点上的用户继续服务，谢谢！</span></span><br /><span style="font-size:small">&nbsp;保证系统已接入用户继续服务。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">3.请问专家：复赛提交的文档是要整个系统的全部文档，还是只描述复赛中新增加部分？</span></span><br /><span style="font-size:small">&nbsp;整个系统。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">4.请问专家：1、同【6.11汇总】问题15.</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;复赛还是只要求几个进程在同一台计算机上实现，而多台计算机的情况不做要求吗？2、“支持PlNode热插拔”能否这样理解：任意PlNode进程打开后会自动与建立SysCtrlNode进程连接，而关闭后会自动与SysCtrlNode进程SysCtrlNode进程断开连接。3、“PlNode拔出，系统保证为之前接入的用户继续服务”，能否这样理解：系统会将原该PlNode进程上的用户服务分配到其他PlNode进程上，同时符合均衡分配规则。4、如果当前与SysCtrlNode进程连接的PlNode进程分别是：PlNodeA和PlNodeB，PlNodeA接入了用户x，PlNodeB接入了用户y。这时同时关闭PlNodeA和PlNodeB，那么如何继续为用户x和用户y服务？还是取消服务呢？5、PlNode个数为0时，能否这样处理：如果测试进程请求用户服务，将提示：PlNode进程服务器没有打开，请稍候再请求服务。6、能否这样理解： SysCtrlNode进程突然关闭后不会导致PlNode进程也关闭，这时已接入的用户服务还在PlNode进程中； SysCtrlNode关闭后，如果在测试进程上有任意用户服务，会提示：SysCtrlNode进程服务器正繁忙，请稍候再请求服务；SysCtrlNode进程重启后，将重新连接上PlNode进程，这时测试进程向SysCtrlNode进程发送新的用户服务请求，则SysCtrlNode进程即与测试进程再次建立连接，同时接收测试进程最新的用户服务。</span></span><br /><span style="font-size:small">&nbsp;1、为方便评审，请在同一台计算机实现。</span><br /><span style="font-size:small">&nbsp;2、可以这么理解。</span><br /><span style="font-size:small">&nbsp;3、是的。</span><br /><span style="font-size:small">&nbsp;4、取消服务，因为已经没有plnode了。</span><br /><span style="font-size:small">&nbsp;5、可以。</span><br /><span style="font-size:small">&nbsp;6、SysctrlNode进程关闭，plnode进程可不关闭，这是两个独立进程，用户仍然保持，这也是复赛的第二点要求。对于sysctrlnode进程关闭后，测试进程的处理你的理解是正确的。</span><br /><span style="font-size:small">&nbsp;5.请问专家：负荷节点和用户之间有直接通信吗？即总控制节点故障，负荷节点还能给用户提供服务吗？</span><br /><span style="font-size:small">&nbsp;这是复赛第二点的要求，请自行考虑如何实现。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">6.请问专家：a)新插入PlNode能为新接入的用户服务，是指新插入的PlNode参与均衡分配，还是新接入的用户要全部都分配到新插入的PlNode上？b)PlNode拔出，系统保证为之前接入的用户继续服务，是指要把拔出的PlNode上的用户重新分配到其他可用负荷节点上吗？</span></span><br /><span style="font-size:small">&nbsp;a）参与均衡分配。</span><br /><span style="font-size:small">&nbsp;b）复赛的第一点要求，请自行考虑如何实现继续服务。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">7.复赛阶段问专家2个问题，1，刚某个PLNode节点拔开断开后，处在这个PLNode节点的用户是自动释放链路，还是将这些用户随机按均衡接到其他的PLNode上。2，当某次的测试用例进程结束后，是否把该次测试的用户释放掉，也就是说重置系统，还是在系统中继续保留上次测试用例新增的用户。</span></span><br /><span style="font-size:small">&nbsp;1、复赛的第一点要求，请自行考虑如何实现继续服务。</span><br /><span style="font-size:small">&nbsp;2、好的设计，选择权应该交给操作者去处理，而不是测试进程自行处理。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">8.专家好，关于复赛有一个问题：复赛要求中提到：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;注意：复赛的测试用例需要构造PlNode为0~5的不同情况。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;如：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;PlNode为1时，</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;用例1</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;。。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;用例2</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;。。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;PlNode为N时，</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;用例1</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;。。。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;用例2</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;。。。</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;关于这个要求的具体含义，看不懂，希望专家解答。谢谢</span></span><br /><span style="font-size:small">&nbsp;当plnode为N时，复赛的两个要求实现对应的测试用例。当plnode为1个时，设计几个用例进行测试，plnode为2个时，同样进行类似测试。。。。。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">9.复赛问题：3个小问题请教专家：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;1 支持PlNode的插入，是手动点击一个exe进行插入，还是用程序实现PlNode的插入？</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;2 PlNode拔出，系统要为之前的用户继续服务，但是如果所有PlNode都拔出怎么办？？</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;3 是否考虑直接点击终端右上角的x 来拔出plNode的情况？</span></span><br /><span style="font-size:small">&nbsp;1、请自行考虑实现细节。</span><br /><span style="font-size:small">&nbsp;2、请自行考虑这种异常处理。</span><br /><span style="font-size:small">&nbsp;3、请自行考虑实现细节。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">10.你好，请问，题目中说服务节点支持热插拔，那当服务节点断开后，原来这个节点上进行的服务是结束还是交给其他节点继续为其服务呢？还有支持5个服务节点，是支持5个节点热插拔？固定的三个节点，二个支持热插拔？热插拔在断开的时候是在提前告知总控节点我要退出，然后再退出。还是异常退出，没有任何征兆，直接断电，服务节点退出呢？</span></span><br /><span style="font-size:small">&nbsp;第一个问题，这是复赛第一个要求的具体实现细节，请自行考虑。</span><br /><span style="font-size:small">&nbsp;应该是任何一个节点都应该支持热插拔。</span><br /><span style="font-size:small">&nbsp;服务节点如何操作热插拔以及热插拔后系统的应对，应该说肯定包含你说的这两种情况。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">11.（1）.支持PlNode热插拔，最多支持5个a)新插入PlNode能为新接入的用户服务，之前接入的用户维持现b)PlNode拔出，系统保证为之前接入的用户继续服务问：对于拔出的PINode上的用户，系统是直接忽略还是需要提前将其转移到其他未被拔出的PINode上？</span></span><br /><span style="font-size:small">&nbsp;复赛的要求写的很明白：PlNode拔出，系统保证为之前接入的用户继续服务。这是设计者需要考虑的。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">12.请问专家：对于PlNode 和用户是用ID 区分它们还是用IP区分它们？按照题意我觉得应该是ID，ID和IP之间没有关系，想证实一下。</span></span><br /><span style="font-size:small">&nbsp;没有直接联系，当然也可以让他们有联系。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">13.可以使用数据库记录信息吗？比如mysql</span></span><br /><span style="font-size:small">&nbsp;不要使用第三方数据库。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">14.专家你好 我有两个问题，复赛中的测试用例 “PlNode为1时，用例1 。。用例2 。。”1、其中“PlNode为1时”，“1”指的是PlNode的标识，还是指当前的PlNode总数？2、用例1、2具体要完成的任务是什么，可以详细说明下吗？</span></span><br /><span style="font-size:small">&nbsp;1、plnode总数</span><br /><span style="font-size:small">&nbsp;2、复赛的两个要求。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">&nbsp;15.复赛的控制节点重启后对已接入的节点没影响是啥意思呀？能具体描述清楚吗？</span></span><br /><span style="font-size:small"><span style="color:#000000">&nbsp;已接入用户在重启后不需要重新接入。</span></span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">16.热插拔是什么意思啊。。不会还要写USB驱动吧。。。。</span></span><br /><span style="font-size:small">&nbsp;这里的热插拔只是硬件热插拔的软件抽象。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">17.1.复赛设计文档和说明文档可以只写对之前设计的改变吗？2.PlNode节点拔出后，若它上面负载用户数不为0是否要将这些用户转移到其他PlNode上，还是直接丢弃这些用户，又或者是只有用户数为0才能拔出？3.构造的测试用例，当PlNode为1个、2个。。。这个意思是PlNode的个数为对应的测试用例规定的个数保持不变还是初始时是这么多？4.之前设计中支持接入的用户数太多了，复赛是否可以减少些，依然实现功能？5.复赛提交时间变了吗？</span></span><br /><span style="font-size:small">&nbsp;1、请提供完整的文档</span><br /><span style="font-size:small">&nbsp;2、这是复赛的要求，请自行考虑实现细节。</span><br /><span style="font-size:small">&nbsp;3、初始的plnode数目，即支持plnode为N个时的用例覆盖。</span><br /><span style="font-size:small">&nbsp;4、这个请自行考虑。</span><br /><span style="font-size:small">&nbsp;5、没有变，7月27日提交。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">18.复赛负荷分担的可靠性系统仿真题目 请问专家有疑惑的2个问题1、复赛要求的“用例1”与初赛的“用例1”是一样的内容吗？“用例1”和“用例2”是用一个进程实现还是用2个独立的进程实现？2、PlNode节点的热插拔和SysCtrlNode节点的重启是否可以理解为：Test进程发送命令消息给SysCtrlNode节点来实现PlNode节点热插拔和SysCtrlNode节点重启的？</span></span><br /><span style="font-size:small">&nbsp;1、初赛和复赛肯定不一样。用例和进程没有直接联系。</span><br /><span style="font-size:small">&nbsp;2、这应该只是一种情况，请自行考虑是否存在其他情况。</span><br /><span style="font-size:small">&nbsp;<span style="color:#800080">19.请问专家组：</span></span><br /><span style="font-size:small"><span style="color:#800080">&nbsp;热插之后与热拔之前是否需要分节点向总控节点的主动发送请求信息？热插入是否需要总控节点允许请求后接入负荷节点，热拔是否需要总控节点收到请求，卸载负荷节点之后才能拔出？还是两种都支持强制的插入拔出？谢谢！</span></span><br /><span style="font-size:small">这两种情况应该都包含，但是否还有其他情况，需要设计者自行考虑。 </span></span></span><br />                    </div>

                       <div class="attentionBar g6">了解更多中兴校园招聘笔面经讯息，请即刻关注<a href="http://zte.dajie.com/page/welcome-zte">中兴2013校园招聘</a></div>
    <span id="manage-menu-span" class="floatright" style="padding:8px 7px 7px 7px">
</span>
<div id="share-module">
    <span class="b">把当前话题推荐给站外好友 ：</span>
    <a href="javascript:void(0);" class="renren">人人</a>
    <a href="javascript:void(0)" class="kaixin">开心</a>
    <a href="javascript:void(0);" class="sina">新浪微博</a>
</div>


                </div>
            </div>
    <div style="width:625px">
<div id="comment">
</div>
    </div>
        </div>
    </div>
    <div class="floor"></div>
</div>
</div>
</div>
            </div>
    </div>
</div>
<div id="footer">
    <address>
        <span class="floatright">
        <a href="http://www.dajie.com/about/">关于</a>

        | <a href="http://s.dajie.com/">招聘</a>
        | <a href="http://123.dajie.com/">企业</a>
        | <a href="http://city.dajie.com/">城市</a>
        | <a href="http://biz.dajie.com/">行业</a>
        | <a href="http://company.dajie.com/sub/exam/bs">笔经</a>

        | <a href="http://company.dajie.com/sub/exam/ms">面经</a>
        | <a href="mailto:service@dajie.com">意见反馈</a>
        | <a href="http://www.dajie.com/about/privacy.html">服务与声明</a>
        </span>&copy;2008-2013&nbsp;大街网&nbsp;|&nbsp;京ICP证090373号&nbsp;|&nbsp;京公网安备11010802008965

    </address>
</div>

<script type="text/javascript">
    var root_canShowRegFloat = true;
    $(function(){
        var is_login = $.cookie('dj_auth') != null || $.cookie('dj_auth_v3') != null;
    });
</script>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/css/modules/register-pop.42207.css"/>
    <script type="text/javascript" src="http://assets.dajieimg.com/js/jquery.formvalidate.43535.js"></script>
<div id="J_LoginDialogBox" style="display:none;">
    <div class="dj-dialog-login clearfix">
        <div class="social-login-box">
            <div class="hd"><h3>使用以下帐号登录</h3></div>
            <ul class="social-login-list clearfix">
                        <li class="login-renren-link"><a href="http://www.dajie.com/account/rr/login" title="人人帐号登录">人人帐号登录</a></li>
                        <li class="login-kaixin001-link no-mr"><a href="http://www.dajie.com/account/kx/login" title="开心帐号登录">开心帐号登录</a></li>
                        <li class="login-qqweibo-link"><a href="http://www.dajie.com/account/qq/login" title="腾讯微博登录">腾讯微博登录</a></li>
                        <li class="login-weibo-link no-mr"><a href="http://www.dajie.com/account/sina/login" title="新浪微博帐号登录">微博帐号登录</a></li>
            </ul>
            <div class="g9">快速进入，预见新自己！</div>
        </div>
<div class="dj-login-box">
    <div class="hd"><h3>使用大街网帐号登录</h3></div>
    <table class="login-table">
        <tr>
            <th>
                <label for="login-email">邮　箱:</label>
            </th>
            <td>
                <input id="login-email" class="reg-input-wrap" type="text" tabindex="1" reg="email" name="email"
                       maxlength="50" autocomplete="off">

                <div class="error"></div>
            </td>
        </tr>
        <tr>
            <th><label for="login-pwd">密　码:</label></th>
            <td>
                <input id="login-pwd" class="reg-input-wrap" type="password" tabindex="2" name="password">

                <div class="error"></div>
            </td>
        </tr>
        <tr id="login-captcha-tr" style="display: none">
            <th><label for="login-captcha">验证码:</label></th>
            <td>
                <input id="login-captcha" type="text" tabindex="3" name="captcha" style="width:72px" maxlength="10">
                
                <a onclick="reset_captcha();return false;" href="javascript:void(0)" style="vertical-align:middle;font-size:12px;color:#86B5D7">换一换</a>
                <div class="error"></div>
            </td>
        </tr>
        <tr class="spc-tr">
            <th></th>
            <td>
                <div class="fr"><a class="g9" href="http://www.dajie.com/account/lostpassword" title="">忘记密码？</a>
                </div>
                <input type="checkbox" class="checkbox" checked id="J_KeepLoginStatus"><label for="J_KeepLoginStatus"
                                                                                              class="checkbox">保持登录状态</label>
            </td>
        </tr>
        <tr class="spc-tr">
            <th></th>
            <td>
                <a id="reg-link" class="fr" href="http://www.dajie.com/account/reg" title="注册大街网帐号"
                   stat="7026">注册大街网帐号</a>
                <a href="###" title="" id="login-submit" class="goto-login-btn formValidateSubmit"
                   tabindex="3" stat="7021"><b>登&nbsp;&nbsp;录</b></a>
                <input type="hidden" name="method" value="do"/>
                <input type="hidden" id="type" name="type" value="0"/>
                <input type="hidden" name="redir" value="/">
            </td>
        </tr>
    </table>
</div>
        <div class="buttons" style="display:none;">
            <button class="default"><span><span>确定</span></span></button>
            <button class="normal"><span><span>取消</span></span></button>
        </div>
    </div>
</div>

<script type="text/javascript">
    function pop_reg(redir, defaultPop,popRegFloat) {
        if (arguments.length == 0) {
            redir = '/';
            defaultPop = 'login';
            popRegFloat = false;
        }
        if(redir == '' || redir == '/') {
            redir = document.location.href;
        }
        var regLink = $('#reg-link');
        if (regLink.length > 0) {
            var regLinkHref = regLink.attr('href');
            if (regLinkHref.indexOf('?') > 0) {
                regLinkHref = regLinkHref + '&redir=' + encodeURIComponent(redir);
            } else {
                regLinkHref = regLinkHref + '?redir=' + encodeURIComponent(redir);
            }
            regLink.attr('href',regLinkHref);
        }
        $('table.login-table input[name=redir]').val(redir);
        $('.login-renren-link a').attr('href', 'http://www.dajie.com/account/rr/login?redir='+encodeURIComponent(redir));
        $('.login-kaixin001-link a').attr('href', 'http://www.dajie.com/account/kx/login?redir='+encodeURIComponent(redir));
        $('.login-qqweibo-link a').attr('href', 'http://www.dajie.com/account/qq/login?redir='+encodeURIComponent(redir));
        $('.login-weibo-link a').attr('href', 'http://www.dajie.com/account/sina/login?redir='+encodeURIComponent(redir));
        $("#J_LoginDialogBox").dialog({
            title: '登录',
            mercy:false,
            width:760,
            mask:true,
            stay:'#J_LoginDialogBox',
            onabort:function(){
                if(popRegFloat){
                    try {
                        if (typeof(forceRegAcount) == "function") {
                            if($('#J_LoginDialogBox').hasClass('rootRegFloat')) {
                                return;
                            }
                            forceRegAcount();
                            $('#J_LoginDialogBox').addClass('rootRegFloat');
                        }
                    } catch (e) {
                    }
                }
            }
        });

        $('.pickpane').css({width:"220"});
            $('.titlebar .close').hide();
            setTimeout("$('.titlebar .close').fadeIn('slow')", 0);
    }
</script>
    <script type="text/javascript">
            forceLogin();
        function forceLogin(){
            var auth = $.cookie('dj_auth_v3');
            if (auth == null || auth.length <= 0) {
                auth = $.cookie('dj_auth');
            }
            var login_tips = $.cookie("login_tips");
            if(auth==null || auth.length <= 0){
                if (login_tips == null) {
                    var currentDate = new Date();
                    var cookieExpiredTime=new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate(),currentDate.getHours() + 1,currentDate.getMinutes(),currentDate.getMinutes());
                    $.cookie('login_tips','1',{ expires: cookieExpiredTime, path: '/', domain: 'dajie.com' });
                    pop_reg('/','common-reg',true);
                    root_canShowRegFloat =false;
                }
            }
        }
    </script>


    
    <script type="text/javascript">
          $.get('/follow/follownum',{domain:''}, function(r) {
            $('#member-cnt').text(r);
          });
        $('.concern, #follow-cancel').live('click', function() {
            var obj = $(this);
            var cid = $(this).attr("cid");
            $.ajax({
                url: '/follow/cancel',
                data: 'cid=' + cid,
                async: false,
                success: function(r) {
                    if (r >= 0) {
                        handle_follow_cancel(obj, r);
                    }
                },
                error: function(r) {
                    alert("取消失败")
                }
            });
        });

        $('.unconcern,#follow-club').live('click', function() {
            if(!is_login){
                url = location.href;
                location.href = "http://www.dajie.com/login?redir="+url;
        }else{
                var obj = $(this);
                var cid = $(this).attr("cid");
                var res = 0;
                $.ajax({
                    url: '/follow/add',
                    data: 'cid=' + cid,
                    async: false,
                    success: function(r) {
                        if (r >= 0) {
                            handle_follow_add(obj, r);
                        } else if (r == -2) {
                            alert("添加失败，请先登录");
                        } else if (r == -3) {
                            $.dialog('#tops-cont', {
                                mask: true, title: '提示', width:518, mercy: false,
                                oncomplete: function() {
                                    return true;
                                }
                            });
                        } else {
                            alert("添加关注失败,请稍后再试");
                        }
                    },
                    error: function(r) {
                        alert("添加错误!请稍后再试")
                    }
                });
            }
        });
        function handle_follow_cancel(obj,r){
                $("#follow-club").css('display', '');
                $("#follow-cancel").hide();
                $('#member-cnt').text(r);
            }
            function handle_follow_add(obj,r){
                $("#follow-club").hide();
                $("#follow-cancel").css('display', '');
                $('#member-cnt').text(r);
            }

            if(is_login){
                $.get('/person/is-follow' , {cid:'649'}, function(r) {
                    if(r=='0'){
                        $("#follow-club").show();
                        $("#follow-cancel").hide();
                    }else{
                        $("#follow-club").hide();
                        $("#follow-cancel").show();
                    }
                });
            }
    </script>

    <script type="text/javascript">
        $('#nav-more').hover(function() {
            var suboffset = $(this).offset();
            var left = suboffset.left;
            var top = suboffset.top + 38;

            $(this).addClass('notifications-selected');
            $('.clubNotifications-sub').css({top:top + 'px',left:left + 'px'}).show();
            $('.clubNotifications-sub').hover(function() {
                $('#nav-more').addClass('current');
                $(this).show();
            }, function() {
                $('#nav-more').removeClass('current');
                $(this).hide();
            }).overlay();
        }, function() {
            $(this).removeClass('current')

        })
        $('.clubNotifications-sub li').hover(function() {
            $(this).css({'background-color':'#f3f3f3'})
        }, function() {
            $(this).css({'background-color':'#ffffff'})
        });
    </script>

    <script type="text/javascript">
        $.get('/discuss/admin/113802/menu4detail?recycle=false', function(r) {
            $('#manage-menu-span').append(r);
        });

        function spriteResponseHandler(box, r) {
            if (r.substr(0, 1) == '0') {
                if (r.length > 2 && r.substr(2).length != 0) {
                    location.href = r.substr(2);
                } else {
                    location.href = location.href;
                }
            } else {
                alert(r.substr(2));
            }
        }
    </script>
<script type="text/javascript">$('#manage-menu-span a.manage-box').sprite({title: '权限管理', width: 560, mask: true, oncomplete: spriteResponseHandler});</script>
<script type="text/javascript">$('#manage-menu-span div.managebar div.list a.manage-menu-link-class').sprite({title: '权限管理', width: 560, mask: true, oncomplete: spriteResponseHandler});</script>

<script type="text/javascript"></script>
<script type="text/javascript">
        $('#manage-menu-span a span.share-module-reply').last().click(function() {
            $('#dajie-comment-textbox-id').focus();
        });
    $('#share-module .renren').click(function() {
        renren(screen, document, encodeURIComponent);
    });
    $('#share-module .kaixin').click(function() {
        var st = document.title;
        kaixin(st);
    });
    $('#share-module .sina').click(function() {
        sina(screen, document, encodeURIComponent, '', '', '', '', '', 'utf-8');
    });
</script>

<script type="text/javascript">
    var commentpage = 1;
    function load_comments(page) {
        $('#www-ajax-frame')[0].contentWindow.$.ajax({
            url:'http://www.dajie.com/comment/list',
            data:'objectId=113802&type=club_discuss&currentpage=' + page,
            success: function(r) {
                commentpage = page;
                $('#comment').html(r);
            },
            error: function() {
                $('#comment').text('载入评论失败');
            }
        });
    }
    $(window).load(function() {
        load_comments(commentpage);
    });
</script>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8089983-1']);
    _gaq.push(['_addOrganic', 'baidu', 'word']);
    _gaq.push(['_addOrganic', 'soso', 'w']);
    _gaq.push(['_addOrganic', '3721', 'name']);
    _gaq.push(['_addOrganic', 'yodao', 'q']);
    _gaq.push(['_addOrganic', 'vnet', 'kw']);
    _gaq.push(['_addOrganic', 'sogou', 'query']);
    _gaq.push(['_setDomainName', '.dajie.com']);

    _gaq.push(['_trackPageview']);
        _gaq.push(['_setVar', '12245369']);
    (function () {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
    })();
</script>
<script src='http://js.dajie.com/pv.2010061801.js' type='text/javascript'></script>
<script type="text/javascript">
    var _now = new Date();
    var _style_count = $('link[rel=stylesheet]').length;
    var _script_count = $('script[src]').length;
    var url = "http://st.dajie.com/performance.st";
    var i = new Image(1, 1);
    try {
        i.src = url + "?h=" + (_body_start - _head_start) + "&b=" + (_now - _body_start) + "&s=" + _style_count + "&j=" + _script_count;
        i.onload = function () {
            _uVoid();
        }
    } catch (e) {
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#login-email').val($.cookie("login_email"));
        if ($('#login-email').val() != '') {
            $('#login-pwd').focus();
        } else {
            $('#login-email').focus();
        }
    });

    $(".reg-input-wrap").bind("keypress", function (e) {
        if (e.keyCode == '13' && $(this).attr('id') != 'login-email') {
            e.preventDefault();
            $("#login-submit").click();
        }
    });
    var aErrorMsg = ['邮箱格式错误', '密码长度4-20，请重填','请输入正确验证码'];
    $('.reg-input-wrap').formValidate();

    var emailhosts = ["@qq.com", "@vip.qq.com", "@163.com", "@126.com", "@gmail.com", "@yahoo.com.cn", "@sina.com", "@hotmail.com", "@yahoo.cn", "@sohu.com", "@yeah.net", "@tom.com", "@live.cn", "@foxmail.com", "@139.com", "@21cn.com", "@zju.edu.cn", "@sina.com.cn", "@msn.com", "@mail.ustc.edu.cn", "@mails.jlu.edu.cn", "@sjtu.edu.cn", "@yahoo.com", "@fudan.edu.cn", "@bsnow.net", "@mail.nankai.edu.cn", "@stu.xjtu.edu.cn", "@stu.edu.cn", "@eyou.com", "@mail.ecust.edu.cn", "@mails.tsinghua.edu.cn", "@bjtu.edu.cn", "@mail2.sysu.edu.cn", "@2008.sina.com", "@live.com", "@pku.edu.cn", "@msn.cn", "@ruc.edu.cn", "@bupt.cn", "@sem.tsinghua.edu.cn", "@gsm.pku.edu.cn", "@bit.edu.cn", "@emails.bjut.edu.cn", "@sogou.com", "@mail.bnu.edu.cn", "@vip.sina.com", "@mail.scut.edu.cn", "@mails.thu.edu.cn", "@njupt.edu.cn", "@cuc.edu.cn", "@cqu.edu.cn", "@mail.sdu.edu.cn", "@uestc.edu.cn", "@shu.edu.cn", "@lzu.cn", "@263.net", "@tju.edu.cn" ];
    $('#login-email').matchbox({strict:false, hasTips:false, hasTitle:true, minlength:1, titleLink:'https://mail.qq.com/cgi-bin/loginpage', customQuery:function (q) {
        var atIndex = q.indexOf('@');
        if (q.replace(/ |　/g, '').length == 0) {
            return [];
        }
        var matchs = new Array();
        if (atIndex == -1 || atIndex == q.length - 1) {
            q = q.replace('@', '');
            matchs.push({id:'_Title" class="exceeded', text:'推荐使用 <a href="javascript:void(0);">QQ邮箱</a> 注册'});
            for (var i = 0; i < 9; i++) {
                matchs.push({id:q + emailhosts[i], text:sub_email(q) + emailhosts[i]});
            }
        } else {
            var name = q.substr(0, atIndex);
            var host = q.substr(atIndex);
            var flag = true;
            for (i = 0; i < emailhosts.length; i++) {
                if (emailhosts[i].indexOf(host) == 0) {
                    if (flag) {
                        matchs.push({id:'_Title" class="exceeded', text:'推荐使用 <a href="javascript:void(0);">QQ邮箱</a> 注册'});
                        flag = false;
                    }
                    matchs.push({id:name + emailhosts[i], text:sub_email(name) + emailhosts[i]});
                }
            }
        }
        return matchs;
    }});

    function sub_email(s) {
        if (s.length > 10) {
            s = s.substr(0, 5) + '...' + s.substr(s.length - 5);
        }
        return s;
    }

    function form_submit() {
        if ($.formValidate.check()) {
            $("#login-submit").unbind("click");
            var rememberMePara = '&d.rememberMe=1';
            if (!$('#J_KeepLoginStatus')[0].checked) {
                rememberMePara = '';
            }
            if ($('#login-captcha-tr:visible').length > 0) {
                rememberMePara += '&captcha=' + $('#login-captcha').val();
            }
            var redir = $('table.login-table input[name=redir]').val();
            if (!redir || redir.length == 0) {
                redir = window.location.href;
            }

            if (redir.indexOf('/account/login') >= 0) {
                redir = '/';
            }
            $('.login-table .error').hide();
                var url = '/account/loginsubmit';
                $.ajax({
                    url:url,
                    data:'redir=' + encodeURIComponent(redir) + '&d.email=' + $('#login-email').val() + '&d.password=' + encodeURIComponent($('#login-pwd').val()) + rememberMePara,
                    type:"POST",
                    dataType:"script"
                });
        } else {
            $('.reg-input-wrap').each(function () {
                var r = $.formValidate.check(this),
                        subNum = $('.reg-input-wrap').index(this),
                        $errorBox = $(this).parents('td').children('.error');
                if (!r) {
                    $errorBox.text(aErrorMsg[subNum]);
                } else {
                    $errorBox.text('');
                }
            });
        }
        return false;
    }

    $('.reg-input-wrap').bind('focus', function () {
        $(this).parents('td').find('.error').text('');
    });

    function reset_captcha() {
        $('#login-captcha').val('');
        if($('#login-captcha-img').length > 0) {
            $('#login-captcha-img').attr('src', 'http://www.dajie.com/captcha/code?t'+new Date().getTime())
        } else {
            $('#login-captcha').after('<img id="login-captcha-img" src="http://www.dajie.com/captcha/code" title="验证码" style="vertical-align:middle">');
        }
    }

    function LOGIN_CALLBACK(r) {
        reset_captcha();
        if (r.substr(0, 1) == '1') {
            $('#login-email').parents('td').children('.error').text('邮箱和密码不符，请重新登录！').show();
        } else if(r.substr(0,1) == '2'){
            var info = r.substr(2).split(",");
            $.alert("<div style=' padding: 24px 20px 24px 66px;background: url(http://assets.dajieimg.com/up/profile2012/i/dj-dialog-ico-alert.gif) 12px center no-repeat;'><div class='bd' style='padding-left: 24px;border-left: 1px solid #E5E5E5'><p class='con' style='font-size: 14px;line-height: 20px;'>" + info[0] + "，你的帐号发生过异常登录。</p><p class='plus' style='font-size: 14px;line-height: 20px;padding-top: 10px;color:#333'>我们已向你的邮箱 <strong style='font-weight: bold;color : #333'>" + info[1] + "</strong> 发送密码重置链接，请立即处理。</p></div></div>",{"title":"大街提示","width":460});
        } else if (r.substr(0, 1) == '3') {
            if ($('#login-captcha-tr:visible').length == 0) {
                reset_captcha();
                $('#login-captcha-tr').show();
                $('#login-captcha').addClass('reg-input-wrap');
                $('#login-captcha').bind("keypress", function (e) {
                    if (e.keyCode == '13' && $(this).attr('id') != 'login-email') {
                        e.preventDefault();
                        $("#login-submit").click();
                    }
                });
            } else {
                $('#login-captcha').parents('td').children('.error').text('请输入正确验证码').show();
            }
        } else {
            document.location.href = r;
        }
        $("#login-submit").bind("click", form_submit);
    }
    $("#login-submit").bind("click", form_submit);
</script>


</body>
</html>
