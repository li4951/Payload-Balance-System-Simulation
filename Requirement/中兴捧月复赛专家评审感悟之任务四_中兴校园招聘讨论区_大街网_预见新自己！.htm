












                 
<!DOCTYPE html>
<html class="ua-win ua-wk">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=7"/>
    <meta name="saoatech-site-verification" content="N2Y5MzU2M2YyNmVhOTllMGQwYmI4NzAwMTIxYmE2ZDU=" />
    <title>中兴捧月复赛专家评审感悟之任务四_中兴校园招聘讨论区_大街网_预见新自己！</title>
    <link rel="shortcut icon" href="http://assets.dajieimg.com/images/favicon.ico" />
    <meta content="大街网中兴校园招聘讨论区内容——中兴捧月复赛专家评审感悟之任务四，中兴捧月复赛专家评审感悟之任务四简介：亲爱的同学：您好！s" name="description"/>
    <meta content="中兴捧月复赛专家评审感悟之任务四, 中兴中兴捧月复赛专家评审感悟之任务四, 中兴2013招聘讨论区, 中兴2013校园招聘讨论区, 中兴校园招聘讨论区" name="keywords"/>
    <script type="text/javascript">var _head_start = new Date();var _current_date='2013-01-25 10:45:48';</script>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/css/dajie.45491.css"/>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com??/css/layout/fullwidth.41884.css,/css/channels/club2012.45226.css"/>
    <script type="text/javascript" src="http://assets.dajieimg.com/js/dajie.45275.js"></script>
    <script type="text/javascript" src="http://assets.dajieimg.com??/lib/jquery/jquery.query.43272.js,/js/jquery.linkup.43535.js,/up/atFriend/js/jquery.atFriend.38911.js"></script>
    <script type="text/javascript">
        $.domains = {
            www : "www.dajie.com",
            assets : "assets.dajieimg.com"
        };
    </script>
</head>
<body >
<script type="text/javascript">var  _body_start = new Date();</script>
        <iframe src="http://www.dajie.com/crossdomain/proxy.html?t=1359081948450" id="www-ajax-frame" style="display:none;"></iframe>
    <script type="text/javascript">
        document.domain = 'dajie.com';
    </script>
<div id="dj-header-wrap" class="dj-top-micro">
    <div>
        <div id="header">
        <div id="logo">
            <h1>
                <a href="http://www.dajie.com/home">
                        <img src="http://assets.dajieimg.com/images/header/dj_logo_m_2013.png" alt="大街网"/>
                </a>
            </h1>
        </div>
        <div class="dj-top-section clearfix">
            <div class="dj-uinfo-action clearfix">
                <div class="dj-user-info" id="login-header-region" style="display: none;">
                    <div class="uinfo-inner">
                        <div class="user-avatar">
                            <a style="display: none;" href="http://www.dajie.com/profile/mine" title="" id="user-avatar-link-in-header">
                            </a>
                            <a class="aname" href="http://www.dajie.com/profile/mine" title=""><span class="uname"></span><b class="arrow-ud"></b></a>
                        </div>
                        <div class="user-stuff">
                            <ul class="nav-select">
                                <li><a href="http://job.dajie.com/resume/index" title="我的简历">我的简历</a></li>
                                <li><a href="http://www.dajie.com/settings/avatar" title="帐号设置">帐号设置</a></li>
                                <li class="has-separate last"><a class="dj-hd-special-out" href="http://www.dajie.com/account/logout" title="退出">退出</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="login-pls" id="unlogin-header-region" style="display: none;">
                    <a href="http://www.dajie.com/account/login" title="登录">登录</a><b class="dj-top-separate"></b><a href="http://www.dajie.com/account/reg" title="注册">注册</a>
                </div>
            </div>
            <div class="dj-nav-g">
    <ul class="dj-nav-list clearfix" id="dj-nav-list" style="display:none">
        <li>
            <a href="http://www.dajie.com/home" title="首页"><cite>首页</cite></a>
        </li>
        <li>
            <a href="http://www.dajie.com/profile/mine" title="编辑我的档案"><cite>我的档案</cite></a>
        </li>
        <li class="clearfix">
            <a href="http://job.dajie.com/" title="职位"><cite>职位</cite></a>
        </li>
        <li class="J_companyPop ">
            <a href="http://www.dajie.com/corp/search/index?f=nav" title="公司"><cite>公司</cite></a>
        </li>
    </ul>
            </div>
        </div>
    </div>
    </div>
    <div style="width:220px;display:none;position:absolute;" class="prompt-tips tips-top" id="J_companyPop">
        <div class="tips-main">
            <span class="pointer"></span>
            <a href="javascript:void(0)" stat="2002" class="remove floatright" style="margin-top:2px;">关闭</a>公司需要你补充资料，<a id="dj-corp-edit" target="_blank" href="#">立即补充</a>！
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            $('#J_companyPop .remove').live('click', function () {
                $.cookie('dj_corp_bubble', 'false', {path:'/', domain:'dajie.com', expires:1});//24小时之后过期
                $(this).parents('#J_companyPop').hide();
            });
            $('#dj-corp-edit').live('click', function () {
                var date = new Date();
                date.setTime(date.getTime() + (30 * 60 * 1000)); //30分钟
                $.cookie('dj_corp_bubble', 'false', {path:'/', domain:'dajie.com', expires:date});
                $(this).parents('#J_companyPop').hide();
            });
            $('#dj-nav-list .new').each(function(){
                var $this = $(this);
                if(!$.cookie('c-'+$this.attr('id'))) {
                    $this.show();
                }
            });
            $('#dj-nav-list > li > a').click(function(){
                var $point = $(this).next('.new');
                if($point.length){
                    var date = new Date();
                    date.setTime(date.getTime() + (60 * 60 * 1000) * 24 * 180); //30分钟
                    $.cookie('c-' + $point.attr('id'), '1', {path:'/', domain:'dajie.com', expires:date});
                }
            })
        });
        (function () {
            var iframe = '<iframe class="iframe-mask" frameborder="0" style="" src="javascript:void(0);"></iframe>',
                    hasOverLay = [];
            $('#dj-hd-circle,#postMore, #dj-app-nav, #login-header-region > .uinfo-inner, #dajie-notice-region').each(function (i) {
                $(this).bind('mouseover',function () {
                    var $this = $(this);
                    if($this.parents('#dj-nav-list').length && !$this.hasClass('has-more')) return false;
                    var $navSelect = $this.find('.nav-select'),
                            $width = $navSelect.outerWidth(),
                            $height = $navSelect.outerHeight();
                    $this.addClass('on');
                    if ($this.hasClass('uinfo-inner')) {
                        var _w = $this.outerWidth() - 2;
                        _w = (_w < 94) ? 94 : _w;
                        $navSelect.css({"width":_w});
                        $width = _w;
                        hasOverLay[4] = "1";
                    }
                    if (!$navSelect.parents('.on').find('iframe').length) {
                        $navSelect.parents('.on').append(iframe);
                    }
                    $('.on').find('iframe').css({"width":$width, "height":$height});
                    $this.find('.iframe-mask').show();
                }).bind('mouseleave', function () {
                    var $this = $(this);
                    if($this.parents('#dj-nav-list').length && !$this.hasClass('has-more')) return false;
                    $this.removeClass('on');
                    $this.find('.iframe-mask').hide();
                });
            });
            $('#dj-header-wrap .dj-nav-g, #dj-header-wrap .dj-uinfo-action').mouseout(function (e) {
                if (e.clientY < 0) {
                    setTimeout(function () {
                        $('.dj-nav-g li, #login-header-region .uinfo-inner, #dajie-notice-region').removeClass('on');
                        $('#dj-header-wrap .iframe-mask').hide();
                    }, 0);
                }
            });
        })();
        var is_login = $.cookie('dj_auth') != null || $.cookie('dj_auth_v3') != null; //必须是全局变量，别的项目有用
        window['is_login'] = is_login;
        (function () {//通知气泡以及用户相关信息
            if (is_login) {
                $('#unlogin-header-region').hide();
                $('#login-header-region').show();
                $('#dj-nav-list').show();
                try {
                    window.setTimeout(function () { //为了获取登录用户的头像
                        jQuery.getScript('http://www.dajie.com/ajax/loginuserinfo?t=' + new Date().getTime());
                    }, 50);
                } catch (e) {
                }
                if ($('#dajie-notice-region').length > 0) {
                    $('#dajie-notice-region').show();
                    try {
                        window.setTimeout(function () { //为了获取登录用户的头像
                            jQuery.getScript('http://www.dajie.com/notice/check?t=' + new Date().getTime());
                        }, 1000);
                        window.setInterval(function () {
                            jQuery.getScript('http://www.dajie.com/notice/check?t=' + new Date().getTime());
                        }, 5000 * 60);
                    } catch (e) {
                    }
                }
            } else {
                $('#login-header-region').hide();
                $('#dajie-notice-region').hide();
                $('#unlogin-header-region').show();
            }
        })();
    </script>
</div>
<div class="dj-content-wrap " id="dj-content-wrap">
    <div class="dj-content-inner">
            <div class="dj-content-shadow">
<div id="content">
<div id="maincolumn">
<link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/bd/club/zte/skin.40552.css" />
        <div id="tops-cont"  style="display:none;">
       <div class="tops-cont">
           <p class="b f14 g3 ">你关注的名企达到上限100家，不能再关注名企了</p>
           <p class="g3">取消已关注的名企，才能继续关注其他名企</p>
           <p class="green">看看<a href="http://company.dajie.com/myfollow">“我关注的名企”</a></p>
       </div>
    </div>

    <div class="banner-title">
            <div class="attentionBox">
                <a href="##" title="关注" class="attention-btn" id="follow-club" cid="649" name="中兴通讯股份有限公司" ></a>
                <a href="##" title="取消关注" class="attentioned" id="follow-cancel" cid="649" name="中兴通讯股份有限公司" style="display:none;" ></a>
                <a href="/club/friendlist"><span id="member-cnt" class="text-link">88627</span></a><br/>
                <span class="large">已关注</span>
            </div>
            <div class="c_logo"><a href="http://zte.dajie.com/page/welcome-zte"><img src="http://fs1.dajie.com/newcorplogo/sl/1308135_sl.png" alt="中兴通讯" /></a></div>
        <span class="company-title">中兴通讯股份有限公司</span>

    </div>    <div class="navigation">
        <ul >
            <li class="home" ><a href="http://zte.dajie.com/page/welcome-zte"><span>首&nbsp;页</span></a></li>
            <li class="current" ><a href="/discuss/topic/list"><span>讨论区</span></a></li>
                <li  ><a href="/schedule/list"><span>日&nbsp;程</span></a></li>
                <li  ><a href="/club/introduce"><span>企业介绍</span></a></li>
                <li  ><a href="/page/zte/album"><span>企业风采</span></a></li>
                <li   style="position:relative;z-index:99"><a href="/project/7372">中兴手机创意大赛</a></li>
                <li><a href="#" id="nav-more"><span>更多</span><em class="arrow"></em></a></li>
        </ul>
    </div>
    <div class="clubNotifications-sub">
        <ul>
                        <li><a href="/project/6872">中兴通讯2013届校园招聘启动仪式</a></li>
                        <li><a href="/project/6272">中兴捧月杯校园程序设计大赛兴趣赛</a></li>
                        <li><a href="/project/6123">中兴捧月杯校园程序设计大赛</a></li>
                        <li><a href="/project/6180">中兴通讯2013校园招聘</a></li>
        </ul>
    </div>


<div class="client">
    <div class="roof"></div>
    <div class="room clearfix">
        <div class="crumb clearfix">
            <span class="floatright"><a href="/discuss/topic/list" class="text-link">返回讨论区列表</a></span>
            <a href="/discuss/topic/list" class="text-link">讨论区</a>&nbsp;<span class="gc">&gt;</span>&nbsp;
        中兴捧月复赛专家评审感悟之任务四
        </div>
        <div class="detailMain floatleft">
            <div class="topic">
                <div class="user-text">
                    <div class="pic">
                            <a href="http://www.dajie.com/profile/WHFe4BqR5w**" title="求职小助手"><img src="http://5.head00.dajieimg.com/2012/09/15/190/13476835900007025s.jpg" title="求职小助手"/></a>
                    </div>
                    <h1>中兴捧月复赛专家评审感悟之任务四</h1>
                        <a href="http://www.dajie.com/profile/WHFe4BqR5w**">求职小助手</a>
                    <span class="g9">
                                &nbsp;&nbsp;
                    </span>

                    <span class="time g9">2012-08-03 17:54:47</span>

                    <div class="topic-msg large">
<span style="font-size:10.5pt">亲爱的同学：</span><br />
<span style="font-size:10.5pt">您好！</span><br />
<span style="font-size:10.5pt">非常感谢大家积极参加“中兴捧月”杯程序设计大赛。任务四这道题相对比较简单，容易实现一些，因此选择做这道题的同学也比较多，从论坛的红火程度就可见一斑。同学们热情极高，每天的问题都比较多，提交上来的作品也多。如果在答疑或者评审过程中我们评委有做的不足的地方还请同学们谅解。</span><br />
<span style="font-size:10.5pt"></span><span style="font-size:10.5pt">记得答疑过程中，常有同学们会问"评委……这样做，可以吗？"看到这类问题，我们作为评委其实不太愿意去回答，我们更希望大家能够自己去思考，而不是评委帮着大家思考。比如，同学问可以提供多个PlNode？题目对这是没有限制的，但是我们不希望学生这么做。在真实系统中如果用这种方式，那么维护代价是相当高的。试想如果发现PlNode有个故障或者要增加需求，那不是每个PlNode代码都要修改？因此，如果同样完成功能的2份作品摆在那里，那么评委肯定是更倾向只用维护一套PlNode代码的作品。</span><br />
<span style="font-size:10.5pt"></span><span style="font-size:10.5pt">对于复赛中的第2个小点，“如果系统瘫痪……”，同学讨论的也比较激烈。有些同学说我们设计的系统永不瘫痪，这个是我们软件设计的极限，但是有时候天意难为，一场雷劈轻易就使得亚马逊欧洲的一个数据中心服务器宕机，有些客户因此蒙受巨大损失，而有些客户影响不大。所以，防患于未然很有必要。</span><br />
<span style="font-size:10.5pt"></span><span style="font-size:10.5pt">从复赛的作品看，基本上一半左右的同学能够完成题意所要求的功能点。那么在功能都完成的作品中，作品的质量也存在不同。这里同大家分享一下好作品的特征：</span><br />
<span style="font-size:10.5pt">1）</span><span style="font-size:10.5pt">代码工整，函数注释清晰，可读性强。初看就给人留下好印象。</span><br />
<span style="font-size:10.5pt">2）</span><span style="font-size:10.5pt">函数逻辑处理清晰，函数命名贴切、复用性高、复杂度低。举个反例，有些作品从头到尾只有一个main函数，可见这个main函数得有多长，让人读起来多费劲呀！</span><br />
<span style="font-size:10.5pt">3）</span><span style="font-size:10.5pt">有些同学提供的测试方法好。既有自动化测试用例，也支持手动测试，简单易用。</span><br />
<span style="font-size:10.5pt">4）</span><span style="font-size:10.5pt">有些作品用到快速查找算法。看到这类我们也会加分，试想如果系统用户达到万位数，那么用到快速查找算法的性能优势就非常明显了。</span><br />
<span style="font-size:10.5pt">5）</span><span style="font-size:10.5pt">代码扩展性好。虽然题目限制了5个PlNode，如果换成10个PlNode，对于优秀的作品只是改个宏而已。</span><br />
<span style="font-size:10.5pt">6）</span><span style="font-size:10.5pt">有些作品会设计LOG模块用来保存异常日志，这个真实系统中也是非常重要的一个功能，有同学们能想到这挺出乎我们意料。在真实运行系统中出现异常现象，客户一般不会允许你到服务器上去单步调试，你只能依靠LOG或者其他一些手段来定位分析异常原因。</span><br />
<span style="font-size:10.5pt"></span><span style="font-size:10.5pt">以上提到的几点，不知道同学们是否想到了，或者是想到了而没有这么做。不管怎样，对于没有通过复赛的同学请不要灰心，经验总是慢慢积累出来的，如果有时间，看看《重构改善既有代码的设计》这本书，试着去重构一下自己的代码，相信会有不少收获。另外，恭喜通过复赛的同学，希望你们再接再厉，向更多的人展示你们的优秀。最后，感谢大家对本届大赛的支持和对中兴通讯的支持。</span><br />                    </div>

                       <div class="attentionBar g6">了解更多中兴校园招聘笔面经讯息，请即刻关注<a href="http://zte.dajie.com/page/welcome-zte">中兴2013校园招聘</a></div>
    <span id="manage-menu-span" class="floatright" style="padding:8px 7px 7px 7px">
</span>
<div id="share-module">
    <span class="b">把当前话题推荐给站外好友 ：</span>
    <a href="javascript:void(0);" class="renren">人人</a>
    <a href="javascript:void(0)" class="kaixin">开心</a>
    <a href="javascript:void(0);" class="sina">新浪微博</a>
</div>


                </div>
            </div>
    <div style="width:625px">
<div id="comment">
</div>
    </div>
        </div>
    </div>
    <div class="floor"></div>
</div>
</div>
</div>
            </div>
    </div>
</div>
<div id="footer">
    <address>
        <span class="floatright">
        <a href="http://www.dajie.com/about/">关于</a>

        | <a href="http://s.dajie.com/">招聘</a>
        | <a href="http://123.dajie.com/">企业</a>
        | <a href="http://city.dajie.com/">城市</a>
        | <a href="http://biz.dajie.com/">行业</a>
        | <a href="http://company.dajie.com/sub/exam/bs">笔经</a>

        | <a href="http://company.dajie.com/sub/exam/ms">面经</a>
        | <a href="mailto:service@dajie.com">意见反馈</a>
        | <a href="http://www.dajie.com/about/privacy.html">服务与声明</a>
        </span>&copy;2008-2013&nbsp;大街网&nbsp;|&nbsp;京ICP证090373号&nbsp;|&nbsp;京公网安备11010802008965

    </address>
</div>

<script type="text/javascript">
    var root_canShowRegFloat = true;
    $(function(){
        var is_login = $.cookie('dj_auth') != null || $.cookie('dj_auth_v3') != null;
    });
</script>
    <link rel="stylesheet" type="text/css" href="http://assets.dajieimg.com/css/modules/register-pop.42207.css"/>
    <script type="text/javascript" src="http://assets.dajieimg.com/js/jquery.formvalidate.43535.js"></script>
<div id="J_LoginDialogBox" style="display:none;">
    <div class="dj-dialog-login clearfix">
        <div class="social-login-box">
            <div class="hd"><h3>使用以下帐号登录</h3></div>
            <ul class="social-login-list clearfix">
                        <li class="login-renren-link"><a href="http://www.dajie.com/account/rr/login" title="人人帐号登录">人人帐号登录</a></li>
                        <li class="login-kaixin001-link no-mr"><a href="http://www.dajie.com/account/kx/login" title="开心帐号登录">开心帐号登录</a></li>
                        <li class="login-qqweibo-link"><a href="http://www.dajie.com/account/qq/login" title="腾讯微博登录">腾讯微博登录</a></li>
                        <li class="login-weibo-link no-mr"><a href="http://www.dajie.com/account/sina/login" title="新浪微博帐号登录">微博帐号登录</a></li>
            </ul>
            <div class="g9">快速进入，预见新自己！</div>
        </div>
<div class="dj-login-box">
    <div class="hd"><h3>使用大街网帐号登录</h3></div>
    <table class="login-table">
        <tr>
            <th>
                <label for="login-email">邮　箱:</label>
            </th>
            <td>
                <input id="login-email" class="reg-input-wrap" type="text" tabindex="1" reg="email" name="email"
                       maxlength="50" autocomplete="off">

                <div class="error"></div>
            </td>
        </tr>
        <tr>
            <th><label for="login-pwd">密　码:</label></th>
            <td>
                <input id="login-pwd" class="reg-input-wrap" type="password" tabindex="2" name="password">

                <div class="error"></div>
            </td>
        </tr>
        <tr id="login-captcha-tr" style="display: none">
            <th><label for="login-captcha">验证码:</label></th>
            <td>
                <input id="login-captcha" type="text" tabindex="3" name="captcha" style="width:72px" maxlength="10">
                
                <a onclick="reset_captcha();return false;" href="javascript:void(0)" style="vertical-align:middle;font-size:12px;color:#86B5D7">换一换</a>
                <div class="error"></div>
            </td>
        </tr>
        <tr class="spc-tr">
            <th></th>
            <td>
                <div class="fr"><a class="g9" href="http://www.dajie.com/account/lostpassword" title="">忘记密码？</a>
                </div>
                <input type="checkbox" class="checkbox" checked id="J_KeepLoginStatus"><label for="J_KeepLoginStatus"
                                                                                              class="checkbox">保持登录状态</label>
            </td>
        </tr>
        <tr class="spc-tr">
            <th></th>
            <td>
                <a id="reg-link" class="fr" href="http://www.dajie.com/account/reg" title="注册大街网帐号"
                   stat="7026">注册大街网帐号</a>
                <a href="###" title="" id="login-submit" class="goto-login-btn formValidateSubmit"
                   tabindex="3" stat="7021"><b>登&nbsp;&nbsp;录</b></a>
                <input type="hidden" name="method" value="do"/>
                <input type="hidden" id="type" name="type" value="0"/>
                <input type="hidden" name="redir" value="/">
            </td>
        </tr>
    </table>
</div>
        <div class="buttons" style="display:none;">
            <button class="default"><span><span>确定</span></span></button>
            <button class="normal"><span><span>取消</span></span></button>
        </div>
    </div>
</div>

<script type="text/javascript">
    function pop_reg(redir, defaultPop,popRegFloat) {
        if (arguments.length == 0) {
            redir = '/';
            defaultPop = 'login';
            popRegFloat = false;
        }
        if(redir == '' || redir == '/') {
            redir = document.location.href;
        }
        var regLink = $('#reg-link');
        if (regLink.length > 0) {
            var regLinkHref = regLink.attr('href');
            if (regLinkHref.indexOf('?') > 0) {
                regLinkHref = regLinkHref + '&redir=' + encodeURIComponent(redir);
            } else {
                regLinkHref = regLinkHref + '?redir=' + encodeURIComponent(redir);
            }
            regLink.attr('href',regLinkHref);
        }
        $('table.login-table input[name=redir]').val(redir);
        $('.login-renren-link a').attr('href', 'http://www.dajie.com/account/rr/login?redir='+encodeURIComponent(redir));
        $('.login-kaixin001-link a').attr('href', 'http://www.dajie.com/account/kx/login?redir='+encodeURIComponent(redir));
        $('.login-qqweibo-link a').attr('href', 'http://www.dajie.com/account/qq/login?redir='+encodeURIComponent(redir));
        $('.login-weibo-link a').attr('href', 'http://www.dajie.com/account/sina/login?redir='+encodeURIComponent(redir));
        $("#J_LoginDialogBox").dialog({
            title: '登录',
            mercy:false,
            width:760,
            mask:true,
            stay:'#J_LoginDialogBox',
            onabort:function(){
                if(popRegFloat){
                    try {
                        if (typeof(forceRegAcount) == "function") {
                            if($('#J_LoginDialogBox').hasClass('rootRegFloat')) {
                                return;
                            }
                            forceRegAcount();
                            $('#J_LoginDialogBox').addClass('rootRegFloat');
                        }
                    } catch (e) {
                    }
                }
            }
        });

        $('.pickpane').css({width:"220"});
            $('.titlebar .close').hide();
            setTimeout("$('.titlebar .close').fadeIn('slow')", 0);
    }
</script>
    <script type="text/javascript">
            forceLogin();
        function forceLogin(){
            var auth = $.cookie('dj_auth_v3');
            if (auth == null || auth.length <= 0) {
                auth = $.cookie('dj_auth');
            }
            var login_tips = $.cookie("login_tips");
            if(auth==null || auth.length <= 0){
                if (login_tips == null) {
                    var currentDate = new Date();
                    var cookieExpiredTime=new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate(),currentDate.getHours() + 1,currentDate.getMinutes(),currentDate.getMinutes());
                    $.cookie('login_tips','1',{ expires: cookieExpiredTime, path: '/', domain: 'dajie.com' });
                    pop_reg('/','common-reg',true);
                    root_canShowRegFloat =false;
                }
            }
        }
    </script>


    
    <script type="text/javascript">
          $.get('/follow/follownum',{domain:''}, function(r) {
            $('#member-cnt').text(r);
          });
        $('.concern, #follow-cancel').live('click', function() {
            var obj = $(this);
            var cid = $(this).attr("cid");
            $.ajax({
                url: '/follow/cancel',
                data: 'cid=' + cid,
                async: false,
                success: function(r) {
                    if (r >= 0) {
                        handle_follow_cancel(obj, r);
                    }
                },
                error: function(r) {
                    alert("取消失败")
                }
            });
        });

        $('.unconcern,#follow-club').live('click', function() {
            if(!is_login){
                url = location.href;
                location.href = "http://www.dajie.com/login?redir="+url;
        }else{
                var obj = $(this);
                var cid = $(this).attr("cid");
                var res = 0;
                $.ajax({
                    url: '/follow/add',
                    data: 'cid=' + cid,
                    async: false,
                    success: function(r) {
                        if (r >= 0) {
                            handle_follow_add(obj, r);
                        } else if (r == -2) {
                            alert("添加失败，请先登录");
                        } else if (r == -3) {
                            $.dialog('#tops-cont', {
                                mask: true, title: '提示', width:518, mercy: false,
                                oncomplete: function() {
                                    return true;
                                }
                            });
                        } else {
                            alert("添加关注失败,请稍后再试");
                        }
                    },
                    error: function(r) {
                        alert("添加错误!请稍后再试")
                    }
                });
            }
        });
        function handle_follow_cancel(obj,r){
                $("#follow-club").css('display', '');
                $("#follow-cancel").hide();
                $('#member-cnt').text(r);
            }
            function handle_follow_add(obj,r){
                $("#follow-club").hide();
                $("#follow-cancel").css('display', '');
                $('#member-cnt').text(r);
            }

            if(is_login){
                $.get('/person/is-follow' , {cid:'649'}, function(r) {
                    if(r=='0'){
                        $("#follow-club").show();
                        $("#follow-cancel").hide();
                    }else{
                        $("#follow-club").hide();
                        $("#follow-cancel").show();
                    }
                });
            }
    </script>

    <script type="text/javascript">
        $('#nav-more').hover(function() {
            var suboffset = $(this).offset();
            var left = suboffset.left;
            var top = suboffset.top + 38;

            $(this).addClass('notifications-selected');
            $('.clubNotifications-sub').css({top:top + 'px',left:left + 'px'}).show();
            $('.clubNotifications-sub').hover(function() {
                $('#nav-more').addClass('current');
                $(this).show();
            }, function() {
                $('#nav-more').removeClass('current');
                $(this).hide();
            }).overlay();
        }, function() {
            $(this).removeClass('current')

        })
        $('.clubNotifications-sub li').hover(function() {
            $(this).css({'background-color':'#f3f3f3'})
        }, function() {
            $(this).css({'background-color':'#ffffff'})
        });
    </script>

    <script type="text/javascript">
        $.get('/discuss/admin/116199/menu4detail?recycle=false', function(r) {
            $('#manage-menu-span').append(r);
        });

        function spriteResponseHandler(box, r) {
            if (r.substr(0, 1) == '0') {
                if (r.length > 2 && r.substr(2).length != 0) {
                    location.href = r.substr(2);
                } else {
                    location.href = location.href;
                }
            } else {
                alert(r.substr(2));
            }
        }
    </script>
<script type="text/javascript">$('#manage-menu-span a.manage-box').sprite({title: '权限管理', width: 560, mask: true, oncomplete: spriteResponseHandler});</script>
<script type="text/javascript">$('#manage-menu-span div.managebar div.list a.manage-menu-link-class').sprite({title: '权限管理', width: 560, mask: true, oncomplete: spriteResponseHandler});</script>

<script type="text/javascript"></script>
<script type="text/javascript">
        $('#manage-menu-span a span.share-module-reply').last().click(function() {
            $('#dajie-comment-textbox-id').focus();
        });
    $('#share-module .renren').click(function() {
        renren(screen, document, encodeURIComponent);
    });
    $('#share-module .kaixin').click(function() {
        var st = document.title;
        kaixin(st);
    });
    $('#share-module .sina').click(function() {
        sina(screen, document, encodeURIComponent, '', '', '', '', '', 'utf-8');
    });
</script>

<script type="text/javascript">
    var commentpage = 1;
    function load_comments(page) {
        $('#www-ajax-frame')[0].contentWindow.$.ajax({
            url:'http://www.dajie.com/comment/list',
            data:'objectId=116199&type=club_discuss&currentpage=' + page,
            success: function(r) {
                commentpage = page;
                $('#comment').html(r);
            },
            error: function() {
                $('#comment').text('载入评论失败');
            }
        });
    }
    $(window).load(function() {
        load_comments(commentpage);
    });
</script>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8089983-1']);
    _gaq.push(['_addOrganic', 'baidu', 'word']);
    _gaq.push(['_addOrganic', 'soso', 'w']);
    _gaq.push(['_addOrganic', '3721', 'name']);
    _gaq.push(['_addOrganic', 'yodao', 'q']);
    _gaq.push(['_addOrganic', 'vnet', 'kw']);
    _gaq.push(['_addOrganic', 'sogou', 'query']);
    _gaq.push(['_setDomainName', '.dajie.com']);

    _gaq.push(['_trackPageview']);
        _gaq.push(['_setVar', '12245369']);
    (function () {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
    })();
</script>
<script src='http://js.dajie.com/pv.2010061801.js' type='text/javascript'></script>
<script type="text/javascript">
    var _now = new Date();
    var _style_count = $('link[rel=stylesheet]').length;
    var _script_count = $('script[src]').length;
    var url = "http://st.dajie.com/performance.st";
    var i = new Image(1, 1);
    try {
        i.src = url + "?h=" + (_body_start - _head_start) + "&b=" + (_now - _body_start) + "&s=" + _style_count + "&j=" + _script_count;
        i.onload = function () {
            _uVoid();
        }
    } catch (e) {
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#login-email').val($.cookie("login_email"));
        if ($('#login-email').val() != '') {
            $('#login-pwd').focus();
        } else {
            $('#login-email').focus();
        }
    });

    $(".reg-input-wrap").bind("keypress", function (e) {
        if (e.keyCode == '13' && $(this).attr('id') != 'login-email') {
            e.preventDefault();
            $("#login-submit").click();
        }
    });
    var aErrorMsg = ['邮箱格式错误', '密码长度4-20，请重填','请输入正确验证码'];
    $('.reg-input-wrap').formValidate();

    var emailhosts = ["@qq.com", "@vip.qq.com", "@163.com", "@126.com", "@gmail.com", "@yahoo.com.cn", "@sina.com", "@hotmail.com", "@yahoo.cn", "@sohu.com", "@yeah.net", "@tom.com", "@live.cn", "@foxmail.com", "@139.com", "@21cn.com", "@zju.edu.cn", "@sina.com.cn", "@msn.com", "@mail.ustc.edu.cn", "@mails.jlu.edu.cn", "@sjtu.edu.cn", "@yahoo.com", "@fudan.edu.cn", "@bsnow.net", "@mail.nankai.edu.cn", "@stu.xjtu.edu.cn", "@stu.edu.cn", "@eyou.com", "@mail.ecust.edu.cn", "@mails.tsinghua.edu.cn", "@bjtu.edu.cn", "@mail2.sysu.edu.cn", "@2008.sina.com", "@live.com", "@pku.edu.cn", "@msn.cn", "@ruc.edu.cn", "@bupt.cn", "@sem.tsinghua.edu.cn", "@gsm.pku.edu.cn", "@bit.edu.cn", "@emails.bjut.edu.cn", "@sogou.com", "@mail.bnu.edu.cn", "@vip.sina.com", "@mail.scut.edu.cn", "@mails.thu.edu.cn", "@njupt.edu.cn", "@cuc.edu.cn", "@cqu.edu.cn", "@mail.sdu.edu.cn", "@uestc.edu.cn", "@shu.edu.cn", "@lzu.cn", "@263.net", "@tju.edu.cn" ];
    $('#login-email').matchbox({strict:false, hasTips:false, hasTitle:true, minlength:1, titleLink:'https://mail.qq.com/cgi-bin/loginpage', customQuery:function (q) {
        var atIndex = q.indexOf('@');
        if (q.replace(/ |　/g, '').length == 0) {
            return [];
        }
        var matchs = new Array();
        if (atIndex == -1 || atIndex == q.length - 1) {
            q = q.replace('@', '');
            matchs.push({id:'_Title" class="exceeded', text:'推荐使用 <a href="javascript:void(0);">QQ邮箱</a> 注册'});
            for (var i = 0; i < 9; i++) {
                matchs.push({id:q + emailhosts[i], text:sub_email(q) + emailhosts[i]});
            }
        } else {
            var name = q.substr(0, atIndex);
            var host = q.substr(atIndex);
            var flag = true;
            for (i = 0; i < emailhosts.length; i++) {
                if (emailhosts[i].indexOf(host) == 0) {
                    if (flag) {
                        matchs.push({id:'_Title" class="exceeded', text:'推荐使用 <a href="javascript:void(0);">QQ邮箱</a> 注册'});
                        flag = false;
                    }
                    matchs.push({id:name + emailhosts[i], text:sub_email(name) + emailhosts[i]});
                }
            }
        }
        return matchs;
    }});

    function sub_email(s) {
        if (s.length > 10) {
            s = s.substr(0, 5) + '...' + s.substr(s.length - 5);
        }
        return s;
    }

    function form_submit() {
        if ($.formValidate.check()) {
            $("#login-submit").unbind("click");
            var rememberMePara = '&d.rememberMe=1';
            if (!$('#J_KeepLoginStatus')[0].checked) {
                rememberMePara = '';
            }
            if ($('#login-captcha-tr:visible').length > 0) {
                rememberMePara += '&captcha=' + $('#login-captcha').val();
            }
            var redir = $('table.login-table input[name=redir]').val();
            if (!redir || redir.length == 0) {
                redir = window.location.href;
            }

            if (redir.indexOf('/account/login') >= 0) {
                redir = '/';
            }
            $('.login-table .error').hide();
                var url = '/account/loginsubmit';
                $.ajax({
                    url:url,
                    data:'redir=' + encodeURIComponent(redir) + '&d.email=' + $('#login-email').val() + '&d.password=' + encodeURIComponent($('#login-pwd').val()) + rememberMePara,
                    type:"POST",
                    dataType:"script"
                });
        } else {
            $('.reg-input-wrap').each(function () {
                var r = $.formValidate.check(this),
                        subNum = $('.reg-input-wrap').index(this),
                        $errorBox = $(this).parents('td').children('.error');
                if (!r) {
                    $errorBox.text(aErrorMsg[subNum]);
                } else {
                    $errorBox.text('');
                }
            });
        }
        return false;
    }

    $('.reg-input-wrap').bind('focus', function () {
        $(this).parents('td').find('.error').text('');
    });

    function reset_captcha() {
        $('#login-captcha').val('');
        if($('#login-captcha-img').length > 0) {
            $('#login-captcha-img').attr('src', 'http://www.dajie.com/captcha/code?t'+new Date().getTime())
        } else {
            $('#login-captcha').after('<img id="login-captcha-img" src="http://www.dajie.com/captcha/code" title="验证码" style="vertical-align:middle">');
        }
    }

    function LOGIN_CALLBACK(r) {
        reset_captcha();
        if (r.substr(0, 1) == '1') {
            $('#login-email').parents('td').children('.error').text('邮箱和密码不符，请重新登录！').show();
        } else if(r.substr(0,1) == '2'){
            var info = r.substr(2).split(",");
            $.alert("<div style=' padding: 24px 20px 24px 66px;background: url(http://assets.dajieimg.com/up/profile2012/i/dj-dialog-ico-alert.gif) 12px center no-repeat;'><div class='bd' style='padding-left: 24px;border-left: 1px solid #E5E5E5'><p class='con' style='font-size: 14px;line-height: 20px;'>" + info[0] + "，你的帐号发生过异常登录。</p><p class='plus' style='font-size: 14px;line-height: 20px;padding-top: 10px;color:#333'>我们已向你的邮箱 <strong style='font-weight: bold;color : #333'>" + info[1] + "</strong> 发送密码重置链接，请立即处理。</p></div></div>",{"title":"大街提示","width":460});
        } else if (r.substr(0, 1) == '3') {
            if ($('#login-captcha-tr:visible').length == 0) {
                reset_captcha();
                $('#login-captcha-tr').show();
                $('#login-captcha').addClass('reg-input-wrap');
                $('#login-captcha').bind("keypress", function (e) {
                    if (e.keyCode == '13' && $(this).attr('id') != 'login-email') {
                        e.preventDefault();
                        $("#login-submit").click();
                    }
                });
            } else {
                $('#login-captcha').parents('td').children('.error').text('请输入正确验证码').show();
            }
        } else {
            document.location.href = r;
        }
        $("#login-submit").bind("click", form_submit);
    }
    $("#login-submit").bind("click", form_submit);
</script>


</body>
</html>
